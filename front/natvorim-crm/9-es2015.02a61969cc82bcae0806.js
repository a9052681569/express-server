(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{zYRc:function(e,t,n){"use strict";n.r(t),n.d(t,"DashboardModule",function(){return W});var i=n("tyNb"),c=n("fXoL"),s=n("Wp6s"),r=n("z6cu"),o=n("vkgz"),a=n("JIr8"),d=n("hgo/"),l=n("Qw0g"),b=n("0IaG"),g=n("AytR"),h=n("tk/3");let p=(()=>{class e{constructor(e){this.http=e}getConversion(e){return this.http.post(g.a.apiEndpoints.getConversion,{date:e})}getReminders(e){return this.http.post(g.a.apiEndpoints.getReminders,{date:e})}markReminderSended(e){return this.http.post(g.a.apiEndpoints.markReminderSended,e)}}return e.\u0275fac=function(t){return new(t||e)(c.Wb(h.a))},e.\u0275prov=c.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function m(e,t){1&e&&c.Nb(0,"ntv-spinner",8),2&e&&c.ic("diameter",16)}function u(e,t){1&e&&(c.Sb(0,"p"),c.Ac(1,"\u043a\u0430\u043a\u043e\u0435-\u0442\u043e \u0433\u043e\u0432\u043d\u043e"),c.Rb())}function S(e,t){if(1&e&&c.Nb(0,"ntv-reminder",11),2&e){const e=t.$implicit,n=c.dc(2);c.ic("reminder",e)("selectedMonth",n.selectedMonth)}}function f(e,t){if(1&e&&(c.Sb(0,"div",9),c.yc(1,S,1,2,"ntv-reminder",10),c.Rb()),2&e){const e=t.ngIf;c.Bb(1),c.ic("ngForOf",e)}}let v=(()=>{class e{constructor(e,t,n){this.dialogRef=e,this.month=t,this.cs=n,this.loadingStates=d.a}ngOnInit(){this.selectedMonth=this.month,this.getReminders(this.selectedMonth)}getReminders(e){this.loadingState=this.loadingStates.loading,this.reminders$=this.cs.getReminders(e.date).pipe(Object(o.a)(()=>{this.loadingState=this.loadingStates.default,this.selectedMonth=e}),Object(a.a)(e=>(this.loadingState=this.loadingStates.err,Object(r.a)(e))))}close(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(b.f),c.Mb(b.a),c.Mb(p))},e.\u0275cmp=c.Gb({type:e,selectors:[["ntv-reminders-dialog"]],decls:12,vars:7,consts:[[1,"header"],[3,"selectedMonth","selectionChange"],["mat-icon-button","",3,"click"],[1,"scrollbar"],[3,"ngSwitch"],[3,"diameter",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","reminders",4,"ngIf"],[3,"diameter"],[1,"reminders"],[3,"reminder","selectedMonth",4,"ngFor","ngForOf"],[3,"reminder","selectedMonth"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"ntv-time-range-selector",1),c.Zb("selectionChange",function(e){return t.getReminders(e)}),c.Rb(),c.Sb(2,"button",2),c.Zb("click",function(){return t.close()}),c.Sb(3,"mat-icon"),c.Ac(4,"close"),c.Rb(),c.Rb(),c.Rb(),c.Nb(5,"mat-divider"),c.Sb(6,"ng-scrollbar",3),c.Qb(7,4),c.yc(8,m,1,1,"ntv-spinner",5),c.yc(9,u,2,0,"p",6),c.Pb(),c.yc(10,f,2,1,"div",7),c.ec(11,"async"),c.Rb()),2&e&&(c.Bb(1),c.ic("selectedMonth",t.selectedMonth),c.Bb(6),c.ic("ngSwitch",t.loadingState),c.Bb(1),c.ic("ngSwitchCase",t.loadingStates.loading),c.Bb(1),c.ic("ngSwitchCase",t.loadingStates.err),c.Bb(1),c.ic("ngIf",c.fc(11,5,t.reminders$)))},styles:["[_nghost-%COMP%]{display:block;margin:-24px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 16px;height:63px}.reminders[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-gap:16px;padding:16px}.scrollbar[_ngcontent-%COMP%]{max-height:calc(100vh - 64px)}"]}),e})();var M=n("STbY"),_=n("NFeN"),y=n("ofXK");const w=function(e){return{isActive:e}};function C(e,t){if(1&e){const e=c.Tb();c.Sb(0,"button",5),c.Zb("click",function(){c.pc(e);const n=t.$implicit;return c.dc(2).select(n)}),c.Ac(1),c.Rb()}if(2&e){const e=t.$implicit,n=c.dc(2);c.ic("ngClass",c.kc(2,w,e===n.selectedMonth)),c.Bb(1),c.Cc(" ",e.name," ")}}function R(e,t){if(1&e&&c.yc(0,C,2,4,"button",4),2&e){const e=c.dc();c.ic("ngForOf",e.months)}}let O=(()=>{class e{constructor(){this.months=l.a,this.selectedMonth=l.a[0],this.selectionChange=new c.o}select(e){console.log(e),this.selectionChange.emit(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["ntv-time-range-selector"]],inputs:{selectedMonth:"selectedMonth"},outputs:{selectionChange:"selectionChange"},decls:7,vars:2,consts:[[1,"time-range-selector",3,"matMenuTriggerFor"],["overlapTrigger",""],["intervalSelect","matMenu"],["matMenuContent",""],["mat-menu-item","",3,"ngClass","click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"ngClass","click"]],template:function(e,t){if(1&e&&(c.Sb(0,"h2",0),c.Ac(1),c.Sb(2,"mat-icon"),c.Ac(3,"arrow_drop_down"),c.Rb(),c.Rb(),c.Sb(4,"mat-menu",1,2),c.yc(6,R,1,1,"ng-template",3),c.Rb()),2&e){const e=c.nc(5);c.ic("matMenuTriggerFor",e),c.Bb(1),c.Cc(" ",t.selectedMonth.name," ")}},directives:[M.e,_.a,M.a,M.b,y.j,M.c,y.i],styles:[".time-range-selector[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}"]}),e})();var k=n("bTqV"),P=n("f0Cb"),B=n("4Kj8");const x=function(e){return{width:e}};function A(e,t){if(1&e&&(c.Sb(0,"div",9),c.Sb(1,"p",10),c.Ac(2),c.ec(3,"titlecase"),c.Rb(),c.Sb(4,"div",11),c.Sb(5,"div",12),c.Ac(6,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439"),c.Rb(),c.Sb(7,"div",13),c.Nb(8,"div",14),c.Nb(9,"span",15),c.Sb(10,"p",16),c.Ac(11),c.Rb(),c.Sb(12,"p",16),c.Ac(13),c.Rb(),c.Nb(14,"span",15),c.Rb(),c.Rb(),c.Sb(15,"div",11),c.Sb(16,"div",12),c.Ac(17,"\u0417\u0430\u043a\u0430\u0437\u0430\u043b\u0438 \u0435\u0449\u0435"),c.Rb(),c.Sb(18,"div",13),c.Nb(19,"div",17),c.Nb(20,"span",15),c.Sb(21,"p",16),c.Ac(22),c.Rb(),c.Sb(23,"p",16),c.Ac(24),c.Rb(),c.Nb(25,"span",15),c.Rb(),c.Rb(),c.Rb()),2&e){const e=t.$implicit,n=c.dc(2);c.Bb(2),c.Bc(c.fc(3,13,e.orderType)),c.Bb(6),c.ic("ngStyle",c.kc(15,x,n.getPersentString(e.total,e.sended))),c.Bb(1),c.ic("ngStyle",c.kc(17,x,n.getPersentString(e.total,e.sended))),c.Bb(2),c.Dc("",e.sended," (",n.getPersentString(e.total,e.sended),")"),c.Bb(2),c.Bc(e.total),c.Bb(1),c.ic("ngStyle",c.kc(19,x,n.getPersentString(e.total,e.sended))),c.Bb(5),c.ic("ngStyle",c.kc(21,x,n.getPersentString(e.total,e.didNewOrder))),c.Bb(1),c.ic("ngStyle",c.kc(23,x,n.getPersentString(e.total,e.didNewOrder))),c.Bb(2),c.Dc("",e.didNewOrder," (",n.getPersentString(e.total,e.didNewOrder),")"),c.Bb(2),c.Bc(e.total),c.Bb(1),c.ic("ngStyle",c.kc(25,x,n.getPersentString(e.total,e.didNewOrder)))}}function N(e,t){if(1&e&&(c.Sb(0,"div",7),c.yc(1,A,26,27,"div",8),c.Rb()),2&e){const e=t.ngIf;c.Bb(1),c.ic("ngForOf",e)}}function j(e,t){1&e&&c.Nb(0,"ntv-spinner",18),2&e&&c.ic("diameter",16)}function I(e,t){1&e&&(c.Sb(0,"p"),c.Ac(1,"\u043a\u0430\u043a\u043e\u0435-\u0442\u043e \u0433\u043e\u0432\u043d\u043e"),c.Rb())}let F=(()=>{class e{constructor(e,t){this.cs=e,this.dialog=t,this.selectedMonth=l.a[0],this.loadingStates=d.a}ngOnInit(){this.setActiveMonth(this.selectedMonth)}setActiveMonth(e){console.log(e),this.loadingState=d.a.loading,this.conversion$=this.cs.getConversion(e.date).pipe(Object(o.a)(()=>{this.loadingState=d.a.default,this.selectedMonth=e}),Object(a.a)(e=>(this.loadingState=d.a.err,Object(r.a)(e))))}getPersentString(e,t){return Math.round(100/e*t)+"%"}toReminderList(){this.dialog.open(v,{width:"100%",height:"100%",maxWidth:"100%",data:this.selectedMonth}).afterClosed().subscribe(()=>{this.setActiveMonth(this.selectedMonth)})}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(p),c.Mb(b.b))},e.\u0275cmp=c.Gb({type:e,selectors:[["ntv-conversion"]],decls:11,vars:7,consts:[[1,"header"],[3,"selectedMonth","selectionChange"],["mat-icon-button","",3,"click"],["class","conversion",4,"ngIf"],[3,"ngSwitch"],[3,"diameter",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"conversion"],["class","conversion__item",4,"ngFor","ngForOf"],[1,"conversion__item"],[1,"conversion__item-title"],[1,"conversion__item-data"],[1,"body-4"],[1,"bar"],[1,"bar__scale","bar__scale--sended",3,"ngStyle"],[1,"bar__scale-value-color-changer",3,"ngStyle"],[1,"bar__text"],[1,"bar__scale","bar__scale--did-new-order",3,"ngStyle"],[3,"diameter"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"ntv-time-range-selector",1),c.Zb("selectionChange",function(e){return t.setActiveMonth(e)}),c.Rb(),c.Sb(2,"button",2),c.Zb("click",function(){return t.toReminderList()}),c.Sb(3,"mat-icon"),c.Ac(4,"launch"),c.Rb(),c.Rb(),c.Rb(),c.Nb(5,"mat-divider"),c.yc(6,N,2,1,"div",3),c.ec(7,"async"),c.Qb(8,4),c.yc(9,j,1,1,"ntv-spinner",5),c.yc(10,I,2,0,"p",6),c.Pb()),2&e&&(c.Bb(1),c.ic("selectedMonth",t.selectedMonth),c.Bb(5),c.ic("ngIf",c.fc(7,5,t.conversion$)),c.Bb(2),c.ic("ngSwitch",t.loadingState),c.Bb(1),c.ic("ngSwitchCase",t.loadingStates.loading),c.Bb(1),c.ic("ngSwitchCase",t.loadingStates.err))},directives:[O,k.a,_.a,P.a,y.k,y.m,y.n,y.j,y.l,B.a],pipes:[y.b,y.r],styles:["[_nghost-%COMP%]{display:block;width:100%}.conversion[_ngcontent-%COMP%]{display:grid;grid-gap:16px;padding:16px 0}.conversion__item[_ngcontent-%COMP%]{display:grid;grid-gap:4px}.conversion__item-title[_ngcontent-%COMP%]{font-weight:700}.bar[_ngcontent-%COMP%]{width:100%;height:32px;border-radius:4px;overflow:hidden;background-color:#e8e8e8;display:flex;align-items:center;justify-content:space-between;padding:0 4px}.bar[_ngcontent-%COMP%], .bar__text[_ngcontent-%COMP%]{position:relative}.bar__text[_ngcontent-%COMP%]{color:#000}.bar__scale[_ngcontent-%COMP%], .bar__scale-value-color-changer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%}.bar__scale-value-color-changer[_ngcontent-%COMP%]{right:0;bottom:0;background:#fff;mix-blend-mode:difference}.bar__scale--total[_ngcontent-%COMP%]{width:100%;background-color:#0288d1}.bar__scale--sended[_ngcontent-%COMP%]{background-color:#ffa000}.bar__scale--did-new-order[_ngcontent-%COMP%]{background-color:#388e3c}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]}),e})();const G=[{path:"",component:(()=>{class e{constructor(){this.cards=["","","",""]}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=c.Gb({type:e,selectors:[["ntv-dashboard"]],decls:3,vars:0,consts:[[1,"dashboard"],[1,"widget"]],template:function(e,t){1&e&&(c.Sb(0,"div",0),c.Sb(1,"mat-card",1),c.Nb(2,"ntv-conversion"),c.Rb(),c.Rb())},directives:[s.a,F],styles:[".widget[_ngcontent-%COMP%]{min-height:500px}.dashboard[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-gap:16px;padding:16px}"]}),e})()}];let $=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[i.h.forChild(G)],i.h]}),e})();var T=n("PCNd"),Z=n("5dmV"),D=n("e1Hi"),J=n("bSwM");function K(e,t){1&e&&(c.Sb(0,"span"),c.Ac(1,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),c.Rb())}function Q(e,t){1&e&&(c.Sb(0,"span"),c.Ac(1,"\u041e\u0448\u0438\u0431\u043a\u0430"),c.Rb())}function z(e,t){1&e&&(c.Sb(0,"span"),c.Ac(1,"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"),c.Rb())}let E=(()=>{class e{constructor(e){this.cs=e,this.loadingStates=d.a}ngOnInit(){this.phone="+7"+this.reminder.phone}change(e){this.loadingState=this.loadingStates.loading,this.cs.markReminderSended({id:this.reminder.personId,date:this.selectedMonth.date,sended:e}).pipe(Object(o.a)(()=>{this.loadingState=this.loadingStates.default,this.reminder.sended=e}),Object(a.a)(e=>(this.loadingState=this.loadingStates.err,Object(r.a)(e)))).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(c.Mb(p))},e.\u0275cmp=c.Gb({type:e,selectors:[["ntv-reminder"]],inputs:{reminder:"reminder",selectedMonth:"selectedMonth"},decls:7,vars:7,consts:[[1,"card"],[3,"value","overline","clip"],["color","accent",3,"checked","click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(e,t){1&e&&(c.Sb(0,"mat-card",0),c.Nb(1,"ntv-overlined",1),c.Sb(2,"mat-checkbox",2),c.Zb("click",function(e){return e.preventDefault(),t.change(!t.reminder.sended)}),c.Qb(3,3),c.yc(4,K,2,0,"span",4),c.yc(5,Q,2,0,"span",4),c.yc(6,z,2,0,"span",5),c.Pb(),c.Rb(),c.Rb()),2&e&&(c.Bb(1),c.ic("value",t.reminder.inst?t.reminder.inst:t.phone)("overline",t.reminder.inst?"\u0438\u043d\u0441\u0442\u0430\u0433\u0440\u0430\u043c\u043c":"\u0442\u0435\u043b\u0435\u0444\u043e\u043d")("clip",t.reminder.inst?t.reminder.inst:t.phone),c.Bb(1),c.ic("checked",t.reminder.sended),c.Bb(1),c.ic("ngSwitch",t.loadingState),c.Bb(1),c.ic("ngSwitchCase",t.loadingStates.loading),c.Bb(1),c.ic("ngSwitchCase",t.loadingStates.err))},directives:[s.a,D.a,J.a,y.m,y.n,y.o],styles:[".card[_ngcontent-%COMP%]{display:grid;grid-gap:8px}"]}),e})();var L=n("G1Gu");let W=(()=>{class e{}return e.\u0275mod=c.Kb({type:e}),e.\u0275inj=c.Jb({factory:function(t){return new(t||e)},imports:[[$,T.a,Z.a]]}),e})();c.rc(v,[O,k.a,_.a,P.a,L.a,y.m,y.n,B.a,y.k,y.j,E],[y.b])}}]);