!function(){function t(t){return function(t){if(Array.isArray(t))return e(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return e(t,r);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function r(t,e){return(r=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function n(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=i(t);if(e){var a=i(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return o(this,r)}}function o(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function s(t,e,r){return e&&c(t.prototype,e),r&&c(t,r),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"5tjk":function(e,o,i){"use strict";i.r(o),i.d(o,"PeopleModule",function(){return Ht});var c,d,l,b=i("tyNb"),u=i("XNiG"),p=i("LRne"),f=i("1G5W"),m=i("Kj3r"),g=i("eIep"),v=i("HnnZ"),h=i("fXoL"),S=i("l7P3"),y=i("3Pt+"),_=i("SuJO"),O=i("ofXK"),R=i("G1Gu"),k=i("kmnG"),C=i("qFsG"),x=i("/1cH"),P=i("FKr1"),N=i("4Kj8"),B=i("7EHt"),w=i("0IaG"),M=i("bTqV"),I=((c=function(){function t(e,r,n){a(this,t),this.data=e,this.fb=r,this.store=n}return s(t,[{key:"ngOnInit",value:function(){this.editPersonForm=this.fb.group({name:this.data.person.name,email:this.data.person.contacts.email||"",inst:this.data.person.contacts.inst||"",phone:this.data.person.contacts.phone||"",city:this.data.person.address.city,address:this.data.person.address.address})}},{key:"patchPerson",value:function(){var t,e,r,n,o,i,a={id:this.data.person.id,name:null===(t=this.editPersonForm.get("name"))||void 0===t?void 0:t.value,contacts:{email:null===(e=this.editPersonForm.get("email"))||void 0===e?void 0:e.value,inst:null===(r=this.editPersonForm.get("inst"))||void 0===r?void 0:r.value,phone:null===(n=this.editPersonForm.get("phone"))||void 0===n?void 0:n.value},address:{city:null===(o=this.editPersonForm.get("city"))||void 0===o?void 0:o.value,address:null===(i=this.editPersonForm.get("address"))||void 0===i?void 0:i.value}};this.store.dispatch(v.a.patchPending({customer:a}))}}]),t}()).\u0275fac=function(t){return new(t||c)(h.Mb(w.a),h.Mb(y.e),h.Mb(S.h))},c.\u0275cmp=h.Gb({type:c,selectors:[["ntv-edit-person-dialog"]],decls:27,vars:1,consts:[[1,"form",3,"formGroup","ngSubmit"],["appearance","standard"],["matInput","","formControlName","name"],["matInput","","formControlName","email"],["matInput","","formControlName","inst"],["matInput","","formControlName","phone"],["matInput","","formControlName","city"],["matInput","","formControlName","address"],["mat-flat-button","","type","submit"]],template:function(t,e){1&t&&(h.Sb(0,"form",0),h.Zb("ngSubmit",function(){return e.patchPerson()}),h.Sb(1,"mat-form-field",1),h.Sb(2,"mat-label"),h.zc(3,"\u0424\u0418\u041e"),h.Rb(),h.Nb(4,"input",2),h.Rb(),h.Sb(5,"mat-form-field",1),h.Sb(6,"mat-label"),h.zc(7,"E-mail"),h.Rb(),h.Nb(8,"input",3),h.Rb(),h.Sb(9,"mat-form-field",1),h.Sb(10,"mat-label"),h.zc(11,"\u0418\u043d\u0441\u0442\u0430\u0433\u0440\u0430\u043c"),h.Rb(),h.Nb(12,"input",4),h.Rb(),h.Sb(13,"mat-form-field",1),h.Sb(14,"mat-label"),h.zc(15,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),h.Rb(),h.Nb(16,"input",5),h.Rb(),h.Sb(17,"mat-form-field",1),h.Sb(18,"mat-label"),h.zc(19,"\u0413\u043e\u0440\u043e\u0434"),h.Rb(),h.Nb(20,"input",6),h.Rb(),h.Sb(21,"mat-form-field",1),h.Sb(22,"mat-label"),h.zc(23,"\u041e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0430\u0434\u0440\u0435\u0441"),h.Rb(),h.Nb(24,"input",7),h.Rb(),h.Sb(25,"button",8),h.zc(26,"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),h.Rb(),h.Rb()),2&t&&h.ic("formGroup",e.editPersonForm)},directives:[y.v,y.o,y.h,k.c,k.f,C.b,y.c,y.n,y.g,M.a],styles:["[_nghost-%COMP%]{display:block;min-width:500px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}"]}),c),z=i("+PC+"),F=i("UXJo"),j=i("NFeN"),T=i("e1Hi"),$=i("ufcJ"),G=i("z6cu"),A=i("vkgz"),K=i("JIr8"),E=i("hS0P"),Z=((d=function(e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}(i,e);var o=n(i);function i(e){var r;return a(this,i),(r=o.call(this,D)).ordersService=e,r.getOrders=r.effect(function(t){return t.pipe(Object(g.a)(function(t){return r.addOrdersPending(),r.ordersService.getOrders(t).pipe(Object(A.a)(function(t){console.log(t),r.addOrdersSuccess(t)}),Object(K.a)(function(t){return r.addOrdersError(),Object(G.a)(t)}))}))}),r.patchOrder=r.updater(function(t,e){var r=t.orders.slice();return r[r.findIndex(function(t){return t.id===e.id})]=Object.assign({},e),Object.assign(Object.assign({},t),{orders:r})}),r.addOrdersPending=r.updater(function(t){return Object.assign(Object.assign({},t),{loading:!0})}),r.addOrdersSuccess=r.updater(function(e,r){return{orders:[].concat(t(e.orders),t(r)),loading:!1,err:!1}}),r.addOrdersError=r.updater(function(t){return Object.assign(Object.assign({},t),{err:!0,loading:!1})}),r}return i}($.a)).\u0275fac=function(t){return new(t||d)(h.Wb(E.a))},d.\u0275prov=h.Ib({token:d,factory:d.\u0275fac}),d),D={orders:[],loading:!1,err:!1},J=i("f0Cb"),Q=i("wJZa"),H=((l=function t(){a(this,t)}).\u0275fac=function(t){return new(t||l)},l.\u0275cmp=h.Gb({type:l,selectors:[["ntv-kit"]],inputs:{kit:"kit"},decls:3,vars:6,consts:[[3,"overline","value"]],template:function(t,e){1&t&&(h.Nb(0,"ntv-overlined",0),h.Nb(1,"ntv-overlined",0),h.ec(2,"numberToString")),2&t&&(h.ic("overline","\u0432\u043e\u0437\u0440\u0430\u0441\u0442")("value",e.kit.age),h.Bb(1),h.ic("overline","\u0441\u043a\u043e\u043b\u044c\u043a\u043e")("value",h.fc(2,4,e.kit.count)))},directives:[T.a],pipes:[Q.a],styles:["[_nghost-%COMP%]{display:flex;gap:16px}"]}),l);function W(t,e){1&t&&h.Nb(0,"ntv-kit",4),2&t&&h.ic("kit",e.$implicit)}function X(t,e){1&t&&h.Nb(0,"ntv-kit",4),2&t&&h.ic("kit",e.$implicit)}var U,q=((U=function t(e){a(this,t),this.data=e}).\u0275fac=function(t){return new(t||U)(h.Mb(w.a))},U.\u0275cmp=h.Gb({type:U,selectors:[["ntv-order-structure-dialog"]],decls:9,vars:3,consts:[[1,"kits"],[3,"kit",4,"ngFor","ngForOf"],[3,"vertical"],[1,"theatres"],[3,"kit"]],template:function(t,e){1&t&&(h.Sb(0,"div",0),h.Sb(1,"h6"),h.zc(2,"\u041d\u0430\u0431\u043e\u0440\u044b"),h.Rb(),h.xc(3,W,1,1,"ntv-kit",1),h.Rb(),h.Nb(4,"mat-divider",2),h.Sb(5,"div",3),h.Sb(6,"h6"),h.zc(7,"\u0422\u0435\u0430\u0442\u0440\u044b"),h.Rb(),h.xc(8,X,1,1,"ntv-kit",1),h.Rb()),2&t&&(h.Bb(3),h.ic("ngForOf",e.data.orderStructure.kits),h.Bb(1),h.ic("vertical",!0),h.Bb(4),h.ic("ngForOf",e.data.orderStructure.theatres))},directives:[O.j,J.a,H],styles:["[_nghost-%COMP%]{display:grid;grid-template-columns:1fr 1px 1fr;grid-template-rows:repeat(auto-fill,100px);grid-gap:16px}"]}),U),L=i("hgo/"),V=i("Qw0g"),Y=i("Wcn/"),tt=i("Wp6s"),et=i("bSwM"),rt=i("d3UM");function nt(t,e){if(1&t&&(h.Sb(0,"mat-option",22),h.zc(1),h.Rb()),2&t){var r=e.$implicit;h.ic("value",r),h.Bb(1),h.Bc(" ",r," ")}}function ot(t,e){if(1&t&&(h.Sb(0,"mat-option",22),h.zc(1),h.Rb()),2&t){var r=e.$implicit;h.ic("value",r.date),h.Bb(1),h.Bc(" ",r.name," ")}}function it(t,e){if(1&t&&(h.Sb(0,"mat-option",22),h.zc(1),h.Rb()),2&t){var r=e.$implicit;h.ic("value",r),h.Bb(1),h.Bc(" ",r," ")}}function at(t,e){if(1&t&&(h.Sb(0,"mat-option",22),h.zc(1),h.Rb()),2&t){var r=e.$implicit;h.ic("value",r),h.Bb(1),h.Bc(" ",r," ")}}function ct(t,e){if(1&t){var r=h.Tb();h.Sb(0,"mat-card",23),h.Sb(1,"mat-form-field",4),h.Sb(2,"mat-label"),h.zc(3,"\u0441\u043a\u043e\u043b\u044c\u043a\u043e"),h.Rb(),h.Nb(4,"input",24),h.Rb(),h.Sb(5,"button",16),h.Zb("click",function(){h.pc(r);var t=e.index;return h.dc().removeKit(t)}),h.Sb(6,"mat-icon"),h.zc(7,"delete"),h.Rb(),h.Rb(),h.Sb(8,"mat-form-field",4),h.Sb(9,"mat-label"),h.zc(10,"\u0432\u043e\u0437\u0440\u0430\u0441\u0442"),h.Rb(),h.Sb(11,"mat-select",25),h.xc(12,at,2,2,"mat-option",10),h.Rb(),h.Rb(),h.Rb()}if(2&t){var n=e.$implicit,o=h.dc();h.Bb(4),h.ic("formControl",o.getControl(n.get("count"))),h.Bb(7),h.ic("formControl",o.getControl(n.get("age"))),h.Bb(1),h.ic("ngForOf",o.ages)}}function st(t,e){if(1&t&&(h.Sb(0,"mat-option",27),h.zc(1),h.Rb()),2&t){var r=e.$implicit;h.ic("value",r),h.Bb(1),h.Bc(" ",r," ")}}function dt(t,e){if(1&t){var r=h.Tb();h.Sb(0,"mat-card",23),h.Sb(1,"mat-form-field",4),h.Sb(2,"mat-label"),h.zc(3,"\u0441\u043a\u043e\u043b\u044c\u043a\u043e"),h.Rb(),h.Nb(4,"input",24),h.Rb(),h.Sb(5,"button",16),h.Zb("click",function(){h.pc(r);var t=e.index;return h.dc().removeTheatre(t)}),h.Sb(6,"mat-icon"),h.zc(7,"delete"),h.Rb(),h.Rb(),h.Sb(8,"mat-form-field",4),h.Sb(9,"mat-label"),h.zc(10,"\u0432\u043e\u0437\u0440\u0430\u0441\u0442"),h.Rb(),h.Sb(11,"mat-select",25),h.xc(12,st,2,2,"mat-option",26),h.Rb(),h.Rb(),h.Rb()}if(2&t){var n=e.$implicit,o=h.dc();h.Bb(4),h.ic("formControl",o.getControl(n.get("count"))),h.Bb(7),h.ic("formControl",o.getControl(n.get("age"))),h.Bb(1),h.ic("ngForOf",o.ages)}}function lt(t,e){1&t&&(h.Sb(0,"span",28),h.zc(1," \u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c... "),h.Nb(2,"ntv-spinner",29),h.Rb()),2&t&&(h.Bb(2),h.ic("diameter",16))}function bt(t,e){1&t&&(h.Sb(0,"span",28),h.zc(1," \u041e\u0448\u0438\u0431\u043a\u0430, \u043d\u0430\u0436\u043c\u0438 \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430 "),h.Sb(2,"mat-icon",30),h.zc(3,"error"),h.Rb(),h.Rb())}function ut(t,e){1&t&&(h.Qb(0),h.zc(1," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c "),h.Pb())}var pt,ft=((pt=function(){function t(e,r,n,o){a(this,t),this.dialogRef=e,this.order=r,this.fb=n,this.ordersService=o,this.loadingStates=L.a,this.months=V.a,this.ages=Object.values(Y.a),this.orderTypes=Object.values(Y.b),this.shipmentTypes=Object.values(Y.c),this.initialKitGroupState={age:Y.a.twoThree,count:0}}return s(t,[{key:"ngOnInit",value:function(){this.editOrderForm=this.fb.group({comment:this.order.comment,sended:this.order.sended,shipmentDate:this.order.shipmentDate,shipmentType:this.order.shipmentType,trackNumber:this.order.trackNumber,type:this.order.type,orderStructure:this.fb.group({kits:this.fb.array([]),theatres:this.fb.array([])})}),this.initKitsAndTheatresControls()}},{key:"patchOrder",value:function(){var t=this,e=Object.assign({id:this.order.id,personId:this.order.personId},this.editOrderForm.value);this.loadingState=this.loadingStates.loading,this.ordersService.patchOrder(e).pipe(Object(A.a)(function(e){t.loadingState=null,t.dialogRef.close(e)}),Object(K.a)(function(e){return t.loadingState=t.loadingStates.err,Object(G.a)(e)})).subscribe()}},{key:"addKit",value:function(t){this.kits.push(this.fb.group(t))}},{key:"addTheatre",value:function(t){this.theatres.push(this.fb.group(t))}},{key:"removeKit",value:function(t){this.kits.removeAt(t)}},{key:"removeTheatre",value:function(t){this.theatres.removeAt(t)}},{key:"getControl",value:function(t){return t}},{key:"initKitsAndTheatresControls",value:function(){var t=this;this.order.orderStructure.kits.forEach(function(e){t.addKit(e)}),this.order.orderStructure.theatres.forEach(function(e){t.addTheatre(e)})}},{key:"kits",get:function(){return this.editOrderForm.get("orderStructure").get("kits")}},{key:"theatres",get:function(){return this.editOrderForm.get("orderStructure").get("theatres")}}]),t}()).\u0275fac=function(t){return new(t||pt)(h.Mb(w.d),h.Mb(w.a),h.Mb(y.e),h.Mb(E.a))},pt.\u0275cmp=h.Gb({type:pt,selectors:[["ntv-edit-order-dialog"]],decls:61,vars:12,consts:[[1,"scrollbar"],[1,"form",3,"formGroup","ngSubmit"],[1,"form__block"],[1,"select-card"],["appearance","standard"],["matInput","","formControlName","comment"],[3,"vertical"],[1,"form__block-colomn"],["formControlName","sended"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["formControlName","shipmentDate"],["formControlName","shipmentType"],["formGroupName","orderStructure",1,"form__block"],["formArrayName","kits",1,"form__array"],[1,"form__array-title"],["mat-icon-button","","type","button",3,"click"],["class","form__array-item",4,"ngFor","ngForOf"],["formArrayName","theatres",1,"form__array"],["mat-raised-button","","type","submit",1,"submit-button",3,"ngSwitch"],["class","submit-button__content",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"value"],[1,"form__array-item"],["type","number","matInput","",3,"formControl"],[3,"formControl"],["name","dsfsd",3,"value",4,"ngFor","ngForOf"],["name","dsfsd",3,"value"],[1,"submit-button__content"],[1,"submit-button__spinner",3,"diameter"],[1,"submit-button__error-icon"]],template:function(t,e){1&t&&(h.Sb(0,"ng-scrollbar",0),h.Sb(1,"form",1),h.Zb("ngSubmit",function(){return e.patchOrder()}),h.Sb(2,"h4"),h.zc(3,"\u041e \u0437\u0430\u043a\u0430\u0437\u0435"),h.Rb(),h.Sb(4,"div",2),h.Sb(5,"mat-card",3),h.Sb(6,"mat-form-field",4),h.Sb(7,"mat-label"),h.zc(8,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),h.Rb(),h.Nb(9,"textarea",5),h.Rb(),h.Rb(),h.Nb(10,"mat-divider",6),h.Sb(11,"div",7),h.Sb(12,"mat-card",3),h.Sb(13,"mat-checkbox",8),h.zc(14,"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"),h.Rb(),h.Rb(),h.Sb(15,"mat-card",3),h.Sb(16,"mat-form-field",4),h.Sb(17,"mat-label"),h.zc(18,"\u0422\u0438\u043f"),h.Rb(),h.Sb(19,"mat-select",9),h.xc(20,nt,2,2,"mat-option",10),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(21,"h4"),h.zc(22,"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430"),h.Rb(),h.Sb(23,"div",2),h.Sb(24,"mat-card",3),h.Sb(25,"mat-form-field",4),h.Sb(26,"mat-label"),h.zc(27,"\u0414\u0430\u0442\u0430"),h.Rb(),h.Sb(28,"mat-select",11),h.xc(29,ot,2,2,"mat-option",10),h.Rb(),h.Rb(),h.Rb(),h.Nb(30,"mat-divider",6),h.Sb(31,"mat-card",3),h.Sb(32,"mat-form-field",4),h.Sb(33,"mat-label"),h.zc(34,"\u0422\u0438\u043f"),h.Rb(),h.Sb(35,"mat-select",12),h.xc(36,it,2,2,"mat-option",10),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.Sb(37,"h4"),h.zc(38,"\u0427\u0442\u043e \u0432\u0435\u0437\u0435\u043c"),h.Rb(),h.Sb(39,"div",13),h.Sb(40,"div",14),h.Sb(41,"div",15),h.Sb(42,"h6"),h.zc(43,"\u041d\u0430\u0431\u043e\u0440\u044b"),h.Rb(),h.Sb(44,"button",16),h.Zb("click",function(){return e.addKit(e.initialKitGroupState)}),h.Sb(45,"mat-icon"),h.zc(46,"add"),h.Rb(),h.Rb(),h.Rb(),h.xc(47,ct,13,3,"mat-card",17),h.Rb(),h.Nb(48,"mat-divider",6),h.Sb(49,"div",18),h.Sb(50,"div",15),h.Sb(51,"h6"),h.zc(52,"\u0422\u0435\u0430\u0442\u0440\u044b"),h.Rb(),h.Sb(53,"button",16),h.Zb("click",function(){return e.addTheatre(e.initialKitGroupState)}),h.Sb(54,"mat-icon"),h.zc(55,"add"),h.Rb(),h.Rb(),h.Rb(),h.xc(56,dt,13,3,"mat-card",17),h.Rb(),h.Rb(),h.Sb(57,"button",19),h.xc(58,lt,3,1,"span",20),h.xc(59,bt,4,0,"span",20),h.xc(60,ut,2,0,"ng-container",21),h.Rb(),h.Rb(),h.Rb()),2&t&&(h.Bb(1),h.ic("formGroup",e.editOrderForm),h.Bb(9),h.ic("vertical",!0),h.Bb(10),h.ic("ngForOf",e.orderTypes),h.Bb(9),h.ic("ngForOf",e.months),h.Bb(1),h.ic("vertical",!0),h.Bb(6),h.ic("ngForOf",e.shipmentTypes),h.Bb(11),h.ic("ngForOf",e.kits.controls),h.Bb(1),h.ic("vertical",!0),h.Bb(8),h.ic("ngForOf",e.theatres.controls),h.Bb(1),h.ic("ngSwitch",e.loadingState),h.Bb(1),h.ic("ngSwitchCase",e.loadingStates.loading),h.Bb(1),h.ic("ngSwitchCase",e.loadingStates.err))},directives:[R.a,y.v,y.o,y.h,tt.a,k.c,k.f,C.b,y.c,y.n,y.g,J.a,et.a,rt.a,O.j,y.i,y.d,M.a,j.a,O.m,O.n,O.o,P.n,y.r,y.f,N.a],styles:["[_nghost-%COMP%]{display:block;min-width:500px;margin:-24px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px;width:100%;height:100%;padding:16px}.form__block[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1px 1fr;grid-gap:16px;width:100%}.form__block-colomn[_ngcontent-%COMP%]{width:100%}.form__array[_ngcontent-%COMP%], .form__block-colomn[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.form__array-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 40px;grid-template-rows:repeat(auto-fill,41px);grid-gap:16px}.form__array-title[_ngcontent-%COMP%]{gap:16px}.form__array-title[_ngcontent-%COMP%], .submit-button__content[_ngcontent-%COMP%]{display:flex;align-items:center}.submit-button__spinner[_ngcontent-%COMP%]{margin-top:0;margin-left:8px}.submit-button__error-icon[_ngcontent-%COMP%]{margin-left:8px}.scrollbar[_ngcontent-%COMP%]{max-height:90vh}.select-card[_ngcontent-%COMP%]{display:grid}"]}),pt),mt=i("hA4r"),gt=i("8prF");function vt(t,e){if(1&t){var r=h.Tb();h.Sb(0,"ntv-overlined",9),h.Zb("click",function(){return h.pc(r),h.dc().showOrderStructureDialog()}),h.Rb()}2&t&&h.ic("overline","\u043d\u0430\u0431\u043e\u0440\u044b")("value","\u043d\u0430\u0436\u043c\u0438 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430")}function ht(t,e){if(1&t&&(h.Qb(0),h.Nb(1,"ntv-overlined",11),h.Nb(2,"ntv-kit",12),h.Pb()),2&t){var r=h.dc(2);h.Bb(2),h.ic("kit",r.order.orderStructure.kits[0])}}function St(t,e){if(1&t&&(h.Qb(0),h.Nb(1,"ntv-overlined",13),h.Nb(2,"ntv-kit",12),h.Pb()),2&t){var r=h.dc(2);h.Bb(2),h.ic("kit",r.order.orderStructure.theatres[0])}}function yt(t,e){if(1&t&&(h.xc(0,ht,3,1,"ng-container",10),h.xc(1,St,3,1,"ng-container",10)),2&t){var r=h.dc();h.ic("ngIf",r.order.orderStructure.kits.length),h.Bb(1),h.ic("ngIf",r.order.orderStructure.theatres.length)}}var _t,Ot=((_t=function(){function t(e,r,n){a(this,t),this.dialog=e,this.ordersStore=r,this.clipService=n}return s(t,[{key:"showOrderStructureDialog",value:function(){this.dialog.open(q,{data:{orderStructure:this.order.orderStructure}})}},{key:"showEditor",value:function(){var t=this;this.dialog.open(ft,{data:this.order}).afterClosed().subscribe(function(e){e&&t.ordersStore.patchOrder(e)})}},{key:"moreThanOneKit",get:function(){var t=this.order.orderStructure.kits.length,e=this.order.orderStructure.theatres.length;return t>1||e>1||t>0&&e>0}}]),t}()).\u0275fac=function(t){return new(t||_t)(h.Mb(w.b),h.Mb(Z),h.Mb(z.a))},_t.\u0275cmp=h.Gb({type:_t,selectors:[["ntv-person-order"]],inputs:{order:"order"},decls:14,vars:14,consts:[[1,"order"],[1,"order__data"],[3,"overline","value"],["class","order__kits",3,"overline","value","click",4,"ngIf","ngIfElse"],["oneKit",""],[3,"orderId","sendedStatus"],[3,"orderId","trackNumber"],[1,"order__comment",3,"overline","value"],["mat-icon-button","",1,"order__edit",3,"click"],[1,"order__kits",3,"overline","value","click"],[4,"ngIf"],["overline","\u0447\u0442\u043e \u043f\u0440\u0438\u0432\u0435\u0437\u0442\u0438","value","\u043d\u0430\u0431\u043e\u0440"],[3,"kit"],["overline","\u0447\u0442\u043e \u043f\u0440\u0438\u0432\u0435\u0437\u0442\u0438","value","\u0442\u0435\u0430\u0442\u0440"]],template:function(t,e){if(1&t&&(h.Sb(0,"mat-card",0),h.Sb(1,"div",1),h.Nb(2,"ntv-overlined",2),h.Nb(3,"ntv-overlined",2),h.Nb(4,"ntv-overlined",2),h.xc(5,vt,1,2,"ntv-overlined",3),h.xc(6,yt,2,2,"ng-template",null,4,h.yc),h.Nb(8,"ntv-sended-checkbox",5),h.Nb(9,"ntv-track-field",6),h.Rb(),h.Nb(10,"ntv-overlined",7),h.Sb(11,"button",8),h.Zb("click",function(){return e.showEditor()}),h.Sb(12,"mat-icon"),h.zc(13,"edit"),h.Rb(),h.Rb(),h.Rb()),2&t){var r=h.nc(7);h.Bb(2),h.ic("overline","\u0442\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430")("value",e.order.type),h.Bb(1),h.ic("overline","\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")("value",e.order.shipmentDate),h.Bb(1),h.ic("overline","\u043f\u043e\u0432\u0435\u0437\u0435\u0442")("value",e.order.shipmentType||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"),h.Bb(1),h.ic("ngIf",e.moreThanOneKit)("ngIfElse",r),h.Bb(3),h.ic("orderId",e.order.id)("sendedStatus",e.order.sended),h.Bb(1),h.ic("orderId",e.order.id)("trackNumber",e.order.trackNumber),h.Bb(1),h.ic("overline","\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439")("value",e.order.comment||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d")}},directives:[tt.a,T.a,O.k,mt.a,gt.a,M.a,j.a,H],styles:['[_nghost-%COMP%]{display:block}.order[_ngcontent-%COMP%]{display:grid;grid-template-areas:"data edit" "comment comment";grid-template-columns:1fr 40px;grid-template-rows:auto auto;grid-gap:8px}.order__data[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap;grid-area:data}.order__comment[_ngcontent-%COMP%]{grid-area:comment}.order__edit[_ngcontent-%COMP%]{grid-area:edit}.order__kits[_ngcontent-%COMP%]{cursor:pointer}.order__track-control-spinner[_ngcontent-%COMP%]{margin-top:16px}.order__track-copy-icon[_ngcontent-%COMP%]{cursor:pointer}']}),_t);function Rt(t,e){1&t&&h.Nb(0,"ntv-person-order",4),2&t&&h.ic("order",e.$implicit)}function kt(t,e){1&t&&(h.Sb(0,"p"),h.zc(1,"\u0423 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"),h.Rb())}function Ct(t,e){if(1&t){var r=h.Tb();h.Sb(0,"p"),h.zc(1,"\u041e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 "),h.Sb(2,"span",5),h.Zb("click",function(){return h.pc(r),h.dc(2).getOrders()}),h.zc(3,"\u0435\u0449\u0435 \u0440\u0430\u0437"),h.Rb(),h.Rb()}}function xt(t,e){1&t&&h.Nb(0,"ntv-spinner",6),2&t&&h.ic("diameter",24)}function Pt(t,e){if(1&t&&(h.Qb(0),h.Sb(1,"mat-accordion"),h.xc(2,Rt,1,1,"ntv-person-order",1),h.xc(3,kt,2,0,"p",0),h.Rb(),h.xc(4,Ct,4,0,"p",0),h.Nb(5,"div",2),h.xc(6,xt,1,1,"ntv-spinner",3),h.Pb()),2&t){var r=e.ngIf;h.Bb(2),h.ic("ngForOf",r.orders),h.Bb(1),h.ic("ngIf",!r.orders.length&&!r.err&&!r.loading),h.Bb(1),h.ic("ngIf",r.err),h.Bb(2),h.ic("ngIf",r.loading)}}var Nt,Bt=((Nt=function(){function t(e){a(this,t),this.ordersStore=e}return s(t,[{key:"ngOnInit",value:function(){this.state$=this.ordersStore.select(function(t){return t}),this.getOrders()}},{key:"getOrders",value:function(){this.ordersStore.getOrders(this.personId)}}]),t}()).\u0275fac=function(t){return new(t||Nt)(h.Mb(Z))},Nt.\u0275cmp=h.Gb({type:Nt,selectors:[["ntv-person-orders"]],inputs:{personId:"personId"},features:[h.Ab([Z])],decls:2,vars:3,consts:[[4,"ngIf"],["class","order",3,"order",4,"ngFor","ngForOf"],["if",""],[3,"diameter",4,"ngIf"],[1,"order",3,"order"],[1,"text-button",3,"click"],[3,"diameter"]],template:function(t,e){1&t&&(h.xc(0,Pt,7,4,"ng-container",0),h.ec(1,"async")),2&t&&h.ic("ngIf",h.fc(1,1,e.state$))},directives:[O.k,B.a,O.j,Ot,N.a],pipes:[O.b],styles:[".text-button[_ngcontent-%COMP%]{color:red;cursor:pointer}.order[_ngcontent-%COMP%]{margin-bottom:8px}"]}),Nt);function wt(t,e){if(1&t&&h.Nb(0,"ntv-overlined",6),2&t){var r=e.$implicit;h.ic("clip",r.value)("overline",r.name)("value",r.value||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d")}}function Mt(t,e){if(1&t&&(h.Sb(0,"div",7),h.Sb(1,"h6",8),h.zc(2,"\u0410\u0434\u0440\u0435\u0441"),h.Rb(),h.Nb(3,"ntv-overlined",9),h.Nb(4,"ntv-overlined",10),h.Rb(),h.Sb(5,"h6"),h.zc(6,"\u0417\u0430\u043a\u0430\u0437\u044b"),h.Rb(),h.Nb(7,"ntv-person-orders",11)),2&t){var r=h.dc();h.Bb(3),h.ic("clip",r.person.address.city)("value",r.person.address.city||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"),h.Bb(1),h.ic("clip",r.person.address.address)("value",r.person.address.address||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"),h.Bb(3),h.ic("personId",r.person.id)}}var It,zt=((It=function(){function t(e,r){a(this,t),this.clipService=e,this.dialog=r}return s(t,[{key:"ngOnInit",value:function(){this.contactItems=[{name:"\u041f\u043e\u0447\u0442\u0430",value:this.person.contacts.email||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"},{name:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",value:this.person.contacts.phone||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"},{name:"\u0418\u043d\u0441\u0442\u0430\u0433\u0440\u0430\u043c",value:this.person.contacts.inst||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"}]}},{key:"showEditor",value:function(){this.dialog.open(I,{data:{person:this.person}})}}]),t}()).\u0275fac=function(t){return new(t||It)(h.Mb(z.a),h.Mb(w.b))},It.\u0275cmp=h.Gb({type:It,selectors:[["ntv-person"]],inputs:{person:"person"},decls:10,vars:3,consts:[[1,"person"],[1,"person__title",3,"cdkCopyToClipboard","cdkCopyToClipboardCopied","click"],[1,"person__description",3,"click"],["class","person__address-item",3,"clip","overline","value",4,"ngFor","ngForOf"],["mat-icon-button","",3,"click"],["matExpansionPanelContent",""],[1,"person__address-item",3,"clip","overline","value"],[1,"person__address"],[1,"person__address-title"],["overline","\u0433\u043e\u0440\u043e\u0434",1,"person__address-item",3,"clip","value"],["overline","\u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0435",1,"person__address-item",3,"clip","value"],[3,"personId"]],template:function(t,e){1&t&&(h.Sb(0,"mat-expansion-panel",0),h.Sb(1,"mat-expansion-panel-header"),h.Sb(2,"mat-panel-title",1),h.Zb("cdkCopyToClipboardCopied",function(){return e.clipService.clip(e.person.name)})("click",function(t){return t.stopPropagation()}),h.zc(3),h.Rb(),h.Sb(4,"mat-panel-description",2),h.Zb("click",function(t){return t.stopPropagation()}),h.xc(5,wt,1,3,"ntv-overlined",3),h.Sb(6,"button",4),h.Zb("click",function(){return e.showEditor()}),h.Sb(7,"mat-icon"),h.zc(8,"edit"),h.Rb(),h.Rb(),h.Rb(),h.Rb(),h.xc(9,Mt,8,5,"ng-template",5),h.Rb()),2&t&&(h.Bb(2),h.ic("cdkCopyToClipboard",e.person.name),h.Bb(1),h.Bc(" ",e.person.name," "),h.Bb(2),h.ic("ngForOf",e.contactItems))},directives:[B.c,B.f,B.g,F.a,B.e,O.j,M.a,j.a,B.d,T.a,Bt],styles:['[_nghost-%COMP%]{display:block;overflow:hidden}.person__title[_ngcontent-%COMP%]{min-width:200px;max-width:200px}.person__description[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr) auto;grid-gap:16px}.person__address[_ngcontent-%COMP%]{display:grid;grid-template-areas:"title title" "item item";grid-template-columns:auto auto;grid-template-rows:auto auto}.person__address-title[_ngcontent-%COMP%]{grid-area:title}.person__address-item[_ngcontent-%COMP%]{cursor:pointer}.person.mat-expansion-panel[_ngcontent-%COMP%]{border-radius:0!important}']}),It);function Ft(t,e){if(1&t&&(h.Sb(0,"mat-option",9),h.zc(1),h.Rb()),2&t){var r=e.$implicit;h.ic("value",r),h.Bb(1),h.Bc(" ",r.name," ")}}function jt(t,e){1&t&&h.Nb(0,"ntv-spinner")}function Tt(t,e){1&t&&h.Nb(0,"ntv-person",11),2&t&&h.ic("person",e.$implicit)}function $t(t,e){if(1&t&&(h.Sb(0,"mat-accordion"),h.xc(1,Tt,1,1,"ntv-person",10),h.Rb()),2&t){var r=h.dc().ngIf;h.Bb(1),h.ic("ngForOf",r.customers)}}function Gt(t,e){1&t&&(h.Sb(0,"p"),h.zc(1,"\u041e\u0448\u0438\u0431\u043a\u0430"),h.Rb())}function At(t,e){if(1&t){var r=h.Tb();h.Sb(0,"ng-scrollbar",1),h.Sb(1,"div",2),h.Sb(2,"mat-form-field",3),h.Sb(3,"mat-label"),h.zc(4,"\u043f\u043e\u0438\u0441\u043a \u043f\u043e \u0438\u043c\u0435\u043d\u0438"),h.Rb(),h.Nb(5,"input",4),h.Sb(6,"mat-autocomplete",5,6),h.Zb("optionSelected",function(t){return h.pc(r),h.dc().setCustomer(t)}),h.xc(8,Ft,2,2,"mat-option",7),h.Rb(),h.Rb(),h.xc(9,jt,1,0,"ntv-spinner",8),h.xc(10,$t,2,1,"mat-accordion",8),h.xc(11,Gt,2,0,"p",8),h.Rb(),h.Rb()}if(2&t){var n=e.ngIf,o=h.nc(7),i=h.dc();h.Bb(5),h.ic("formControl",i.name)("matAutocomplete",o),h.Bb(3),h.ic("ngForOf",i.autocompleteOptions),h.Bb(1),h.ic("ngIf",n.loading),h.Bb(1),h.ic("ngIf",n.customers.length),h.Bb(1),h.ic("ngIf",n.err)}}var Kt,Et,Zt,Dt=[{path:"",component:(Kt=function(){function t(e,r,n){a(this,t),this.store=e,this.fb=r,this.addOrderService=n,this.autocompleteOptions=[],this.destroyer$$=new u.a}return s(t,[{key:"ngOnInit",value:function(){this.state=this.store.select("customers"),this.store.dispatch(v.a.searchPending({name:""})),this.initSearch()}},{key:"ngOnDestroy",value:function(){this.destroyer$$.next(),this.destroyer$$.complete()}},{key:"setCustomer",value:function(t){this.store.dispatch(v.a.searchSuccess({customers:[t.option.value]})),this.name.setValue(t.option.value.name)}},{key:"initSearch",value:function(){this.name=this.fb.control(""),this.initAutocomplete()}},{key:"initAutocomplete",value:function(){var t=this;this.name.valueChanges.pipe(Object(f.a)(this.destroyer$$),Object(m.a)(300),Object(g.a)(function(e){return t.prevName&&t.prevName===e?Object(p.a)(t.autocompleteOptions):(t.prevName=e,t.addOrderService.getPersonsByName(e))})).subscribe(function(e){t.autocompleteOptions=e})}}]),t}(),Kt.\u0275fac=function(t){return new(t||Kt)(h.Mb(S.h),h.Mb(y.e),h.Mb(_.a))},Kt.\u0275cmp=h.Gb({type:Kt,selectors:[["ntv-people"]],decls:2,vars:3,consts:[["class","scrollbar",4,"ngIf"],[1,"scrollbar"],[1,"people"],["appearance","standard",1,"search"],["matInput","",3,"formControl","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[3,"person",4,"ngFor","ngForOf"],[3,"person"]],template:function(t,e){1&t&&(h.xc(0,At,12,6,"ng-scrollbar",0),h.ec(1,"async")),2&t&&h.ic("ngIf",h.fc(1,1,e.state))},directives:[O.k,R.a,k.c,k.f,C.b,y.c,x.c,y.n,y.f,x.a,O.j,P.n,N.a,B.a,zt],pipes:[O.b],styles:["[_nghost-%COMP%]{display:block}.search[_ngcontent-%COMP%]{width:100%}.people[_ngcontent-%COMP%]{display:grid;grid-gap:16px;padding:16px}.scrollbar[_ngcontent-%COMP%]{max-height:calc(100vh - 64px);min-height:calc(100vh - 64px)}"]}),Kt)}],Jt=((Et=function t(){a(this,t)}).\u0275mod=h.Kb({type:Et}),Et.\u0275inj=h.Jb({factory:function(t){return new(t||Et)},imports:[[b.h.forChild(Dt)],b.h]}),Et),Qt=i("PCNd"),Ht=((Zt=function t(){a(this,t)}).\u0275mod=h.Kb({type:Zt}),Zt.\u0275inj=h.Jb({factory:function(t){return new(t||Zt)},imports:[[Jt,Qt.a]]}),Zt)}}])}();