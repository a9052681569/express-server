(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{PBY9:function(e,t,r){"use strict";r.r(t),r.d(t,"ShipmentPreparingModule",function(){return U});var n=r("tyNb"),s=r("hgo/"),a=r("fXoL"),i=r("ufcJ"),o=r("z6cu"),c=r("eIep"),p=r("vkgz"),d=r("JIr8"),l=r("AytR"),b=r("tk/3");let u=(()=>{class e{constructor(e){this.http=e}search(e){return this.http.post(l.a.apiEndpoints.prepairingOrders,e)}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(b.a))},e.\u0275prov=a.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),h=(()=>{class e extends i.a{constructor(e){super(f),this.spService=e,this.search=this.effect(e=>e.pipe(Object(c.a)(e=>(this.searchPending(),this.spService.search(e).pipe(Object(p.a)(e=>{console.log(e),this.searchSuccess(e)}),Object(d.a)(e=>(this.searchError(),Object(o.a)(e)))))))),this.searchPending=this.updater(e=>Object.assign(Object.assign({},e),{loadingState:s.a.loading})),this.searchSuccess=this.updater((e,t)=>Object.assign(Object.assign({},e),{orders:t,loadingState:null})),this.searchError=this.updater(e=>Object.assign(Object.assign({},e),{loadingState:s.a.err}))}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(u))},e.\u0275prov=a.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const f={orders:[],loadingState:null};var g=r("XNiG"),m=r("1G5W"),v=r("Kj3r"),O=r("Qw0g"),S=r("Wcn/");const y={data:{shipmentDate:{name:"",date:""},shipmentType:S.c.cdek,ordersType:S.a.twoThree},loadingState:null};var j=r("3Pt+"),F=r("LRne");let I=(()=>{class e{constructor(){}updateFormData(e){return localStorage.setItem("ntv-filter-form-data",JSON.stringify(e)),Object(F.a)(e)}getFormData(){const e=localStorage.getItem("ntv-filter-form-data"),t=e?JSON.parse(e):y.data;return Object(F.a)(t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=a.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),x=(()=>{class e extends i.a{constructor(e){super(y),this.ffs=e,this.saveForm=this.effect(e=>e.pipe(Object(c.a)(e=>this.ffs.updateFormData(e).pipe(Object(p.a)(e=>{this.reqFormSuccess(e)}),Object(d.a)(e=>(this.reqFormError(),Object(o.a)(e))))))),this.setFormData=this.effect(e=>e.pipe(Object(c.a)(()=>this.ffs.getFormData().pipe(Object(p.a)(e=>{this.reqFormSuccess(e)}),Object(d.a)(e=>(this.reqFormError(),Object(o.a)(e))))))),this.reqFormSuccess=this.updater((e,t)=>Object.assign(Object.assign({},e),{data:t,loadingState:null})),this.reqFormError=this.updater(e=>Object.assign(Object.assign({},e),{loadingState:s.a.err}))}}return e.\u0275fac=function(t){return new(t||e)(a.Wb(I))},e.\u0275prov=a.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var B=r("kmnG"),w=r("d3UM"),R=r("ofXK"),N=r("bTqV"),k=r("FKr1");function D(e,t){if(1&e&&(a.Sb(0,"mat-option",7),a.zc(1),a.Rb()),2&e){const e=t.$implicit;a.ic("value",e.date),a.Bb(1),a.Bc(" ",e.name," ")}}function C(e,t){if(1&e&&(a.Sb(0,"mat-option",7),a.zc(1),a.Rb()),2&e){const e=t.$implicit;a.ic("value",e),a.Bb(1),a.Bc(" ",e," ")}}function M(e,t){if(1&e&&(a.Sb(0,"mat-option",7),a.zc(1),a.Rb()),2&e){const e=t.$implicit;a.ic("value",e),a.Bb(1),a.Bc(" ",e," ")}}let P=(()=>{class e{constructor(e,t,r){this.fb=e,this.store=t,this.spStore=r,this.destroyer$$=new g.a,this.shipmentTypes=Object.values(S.c),this.ages=Object.values(S.a),this.months=O.a}ngOnInit(){this.initForm(),this.store.setFormData(),this.initFormSetter(),this.initFormSaver(),this.search()}ngOnDestroy(){this.destroyer$$.next(),this.destroyer$$.complete()}search(){this.spStore.search(this.form.value)}initForm(){this.form=this.fb.group({shipmentDate:y.data.shipmentDate,shipmentType:y.data.shipmentType,ordersType:y.data.ordersType}),this.ages.push("\u0441\u043b\u043e\u0436\u043d\u044b\u0439")}initFormSetter(){this.store.select(e=>e).pipe(Object(m.a)(this.destroyer$$),Object(p.a)(e=>{this.isObjectsEqual(this.form.value,e.data)||this.form.setValue(e.data)})).subscribe()}initFormSaver(){this.form.valueChanges.pipe(Object(m.a)(this.destroyer$$),Object(v.a)(500)).subscribe(e=>{this.store.saveForm(e)})}isObjectsEqual(e,t){const r=this.getDeepValues(Object.values(e)),n=this.getDeepValues(Object.values(t));return r.every(e=>n.includes(e))}getDeepValues(e){return e.reduce((e,t)=>("object"!=typeof t||null===t?e.push(t):Array.isArray(t)?e.push(...this.getDeepValues(t)):e.push(...this.getDeepValues(Object.values(t))),e),[])}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(j.e),a.Mb(x),a.Mb(h))},e.\u0275cmp=a.Gb({type:e,selectors:[["ntv-filter-form"]],decls:18,vars:4,consts:[[1,"form",3,"formGroup","ngSubmit"],["appearance","standard",1,"form__control"],["formControlName","shipmentDate"],[3,"value",4,"ngFor","ngForOf"],["formControlName","shipmentType"],["formControlName","ordersType"],["mat-raised-button","","color","accent","type","submit"],[3,"value"]],template:function(e,t){1&e&&(a.Sb(0,"form",0),a.Zb("ngSubmit",function(){return t.search()}),a.Sb(1,"mat-form-field",1),a.Sb(2,"mat-label"),a.zc(3,"\u0414\u0430\u0442\u0430"),a.Rb(),a.Sb(4,"mat-select",2),a.xc(5,D,2,2,"mat-option",3),a.Rb(),a.Rb(),a.Sb(6,"mat-form-field",1),a.Sb(7,"mat-label"),a.zc(8,"\u0422\u0438\u043f \u043e\u0442\u043f\u0440\u0430\u0432\u043a\u0438"),a.Rb(),a.Sb(9,"mat-select",4),a.xc(10,C,2,2,"mat-option",3),a.Rb(),a.Rb(),a.Sb(11,"mat-form-field",1),a.Sb(12,"mat-label"),a.zc(13,"\u0422\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430"),a.Rb(),a.Sb(14,"mat-select",5),a.xc(15,M,2,2,"mat-option",3),a.Rb(),a.Rb(),a.Sb(16,"button",6),a.zc(17," search "),a.Rb(),a.Rb()),2&e&&(a.ic("formGroup",t.form),a.Bb(5),a.ic("ngForOf",t.months),a.Bb(5),a.ic("ngForOf",t.shipmentTypes),a.Bb(5),a.ic("ngForOf",t.ages))},directives:[j.v,j.o,j.h,B.c,B.f,w.a,j.n,j.g,R.j,N.a,k.n],styles:["[_nghost-%COMP%]{align-items:center;width:100%;height:64px}.form[_ngcontent-%COMP%], [_nghost-%COMP%]{display:grid}.form[_ngcontent-%COMP%]{grid-gap:16px;grid-template-columns:repeat(3,1fr) auto;padding:16px}"]}),e})();var $=r("G1Gu"),_=r("4Kj8"),T=r("Wp6s"),z=r("e1Hi"),G=r("hA4r"),q=r("8prF");let E=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Gb({type:e,selectors:[["ntv-preparing-order"]],inputs:{order:"order"},decls:7,vars:11,consts:[[1,"preparing-order"],["overline","\u0418\u043c\u044f",3,"value","clip"],["overline","\u0422\u0435\u043b\u0435\u0444\u043e\u043d",3,"value","clip"],["overline","\u0413\u043e\u0440\u043e\u0434",3,"value"],["overline","\u0410\u0434\u0440\u0435\u0441",3,"value","clip"],[3,"orderId","sendedStatus"],[3,"orderId","trackNumber"]],template:function(e,t){1&e&&(a.Sb(0,"mat-card",0),a.Nb(1,"ntv-overlined",1),a.Nb(2,"ntv-overlined",2),a.Nb(3,"ntv-overlined",3),a.Nb(4,"ntv-overlined",4),a.Nb(5,"ntv-sended-checkbox",5),a.Nb(6,"ntv-track-field",6),a.Rb()),2&e&&(a.Bb(1),a.ic("value",t.order.name)("clip",t.order.name),a.Bb(1),a.ic("value",t.order.phone||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d")("clip",t.order.phone),a.Bb(1),a.ic("value",t.order.address.city||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"),a.Bb(1),a.ic("value",t.order.address.address?"\u043d\u0430\u0436\u043c\u0438 \u0447\u0442\u043e\u0431\u044b \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u0442\u044c":"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d")("clip",t.order.address.address),a.Bb(1),a.ic("orderId",t.order.id)("sendedStatus",t.order.sended),a.Bb(1),a.ic("orderId",t.order.id)("trackNumber",t.order.trackNumber))},directives:[T.a,z.a,G.a,q.a],styles:[".preparing-order[_ngcontent-%COMP%]{display:grid;grid-gap:16px;width:100%;height:100%}"]}),e})();function J(e,t){1&e&&a.Nb(0,"ntv-spinner")}function V(e,t){1&e&&(a.Sb(0,"p"),a.zc(1,"\u041e\u0448\u0438\u0431\u043a\u0430"),a.Rb())}function K(e,t){1&e&&a.Nb(0,"ntv-preparing-order",6),2&e&&a.ic("order",t.$implicit)}function W(e,t){if(1&e&&(a.Sb(0,"div",4),a.xc(1,K,1,1,"ntv-preparing-order",5),a.Rb()),2&e){const e=a.dc().ngIf;a.Bb(1),a.ic("ngForOf",e.orders)}}function A(e,t){1&e&&(a.Sb(0,"p"),a.zc(1,"\u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432 \u0441 \u0432\u044b\u0431\u0440\u0430\u043d\u043d\u044b\u043c\u0438 \u043a\u0440\u0438\u0442\u0435\u0440\u0438\u044f\u043c\u0438"),a.Rb())}function X(e,t){if(1&e&&(a.Sb(0,"ng-scrollbar",1),a.xc(1,J,1,0,"ntv-spinner",2),a.xc(2,V,2,0,"p",2),a.xc(3,W,2,1,"div",3),a.xc(4,A,2,0,"p",2),a.Rb()),2&e){const e=t.ngIf,r=a.dc();a.Bb(1),a.ic("ngIf",e.loadingState===r.loadingStates.loading),a.Bb(1),a.ic("ngIf",e.loadingState===r.loadingStates.err),a.Bb(1),a.ic("ngIf",!e.loadingState),a.Bb(1),a.ic("ngIf",!e.loadingState&&0===e.orders.length)}}const L=[{path:"",component:(()=>{class e{constructor(e){this.preparingStore=e,this.loadingStates=s.a}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(a.Mb(h))},e.\u0275cmp=a.Gb({type:e,selectors:[["ntv-shipment-preparing"]],decls:3,vars:3,consts:[["class","scrollbar",4,"ngIf"],[1,"scrollbar"],[4,"ngIf"],["class","orders-container",4,"ngIf"],[1,"orders-container"],[3,"order",4,"ngFor","ngForOf"],[3,"order"]],template:function(e,t){1&e&&(a.Nb(0,"ntv-filter-form"),a.xc(1,X,5,4,"ng-scrollbar",0),a.ec(2,"async")),2&e&&(a.Bb(1),a.ic("ngIf",a.fc(2,1,t.preparingStore.state$)))},directives:[P,R.k,$.a,_.a,R.j,E],pipes:[R.b],styles:["[_nghost-%COMP%]{display:block;width:100%;height:100%}.scrollbar[_ngcontent-%COMP%]{max-height:calc(100vh - 64px - 73px);min-height:calc(100vh - 64px - 73px)}.scrollbar__content[_ngcontent-%COMP%]{padding:16px}.orders-container[_ngcontent-%COMP%]{display:grid;grid-gap:16px;padding:16px;grid-template-columns:repeat(auto-fill,minmax(200px,1fr))}"]}),e})()}];let H=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[n.h.forChild(L)],n.h]}),e})();var Q=r("PCNd");let U=(()=>{class e{}return e.\u0275mod=a.Kb({type:e}),e.\u0275inj=a.Jb({factory:function(t){return new(t||e)},imports:[[H,Q.a]]}),e})()}}]);