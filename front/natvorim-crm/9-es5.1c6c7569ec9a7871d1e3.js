!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function n(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{zYRc:function(t,i,c){"use strict";c.r(i),c.d(i,"DashboardModule",function(){return ie});var a,o=c("tyNb"),r=c("fXoL"),s=c("Wp6s"),d=c("z6cu"),l=c("vkgz"),b=c("JIr8"),g=c("hgo/"),u=c("Qw0g"),h=c("0IaG"),f=c("AytR"),p=c("tk/3"),m=((a=function(){function t(n){e(this,t),this.http=n}return n(t,[{key:"getConversion",value:function(e){return this.http.post(f.a.apiEndpoints.getConversion,{date:e})}},{key:"getReminders",value:function(e){return this.http.post(f.a.apiEndpoints.getReminders,{date:e})}},{key:"markReminderSended",value:function(e){return this.http.post(f.a.apiEndpoints.markReminderSended,e)}}]),t}()).\u0275fac=function(e){return new(e||a)(r.Wb(p.a))},a.\u0275prov=r.Ib({token:a,factory:a.\u0275fac,providedIn:"root"}),a);function v(e,t){1&e&&r.Nb(0,"ntv-spinner",8),2&e&&r.ic("diameter",16)}function S(e,t){1&e&&(r.Sb(0,"p"),r.Ac(1,"\u043a\u0430\u043a\u043e\u0435-\u0442\u043e \u0433\u043e\u0432\u043d\u043e"),r.Rb())}function y(e,t){if(1&e&&r.Nb(0,"ntv-reminder",11),2&e){var n=t.$implicit,i=r.dc(2);r.ic("reminder",n)("selectedMonth",i.selectedMonth)}}function M(e,t){if(1&e&&(r.Sb(0,"div",9),r.yc(1,y,1,2,"ntv-reminder",10),r.Rb()),2&e){var n=t.ngIf;r.Bb(1),r.ic("ngForOf",n)}}var _,w=((_=function(){function t(n,i,c){e(this,t),this.dialogRef=n,this.month=i,this.cs=c,this.loadingStates=g.a}return n(t,[{key:"ngOnInit",value:function(){this.selectedMonth=this.month,this.getReminders(this.selectedMonth)}},{key:"getReminders",value:function(e){var t=this;this.loadingState=this.loadingStates.loading,this.reminders$=this.cs.getReminders(e.date).pipe(Object(l.a)(function(){t.loadingState=t.loadingStates.default,t.selectedMonth=e}),Object(b.a)(function(e){return t.loadingState=t.loadingStates.err,Object(d.a)(e)}))}},{key:"close",value:function(){this.dialogRef.close()}}]),t}()).\u0275fac=function(e){return new(e||_)(r.Mb(h.f),r.Mb(h.a),r.Mb(m))},_.\u0275cmp=r.Gb({type:_,selectors:[["ntv-reminders-dialog"]],decls:12,vars:7,consts:[[1,"header"],[3,"selectedMonth","selectionChange"],["mat-icon-button","",3,"click"],[1,"scrollbar"],[3,"ngSwitch"],[3,"diameter",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","reminders",4,"ngIf"],[3,"diameter"],[1,"reminders"],[3,"reminder","selectedMonth",4,"ngFor","ngForOf"],[3,"reminder","selectedMonth"]],template:function(e,t){1&e&&(r.Sb(0,"div",0),r.Sb(1,"ntv-time-range-selector",1),r.Zb("selectionChange",function(e){return t.getReminders(e)}),r.Rb(),r.Sb(2,"button",2),r.Zb("click",function(){return t.close()}),r.Sb(3,"mat-icon"),r.Ac(4,"close"),r.Rb(),r.Rb(),r.Rb(),r.Nb(5,"mat-divider"),r.Sb(6,"ng-scrollbar",3),r.Qb(7,4),r.yc(8,v,1,1,"ntv-spinner",5),r.yc(9,S,2,0,"p",6),r.Pb(),r.yc(10,M,2,1,"div",7),r.ec(11,"async"),r.Rb()),2&e&&(r.Bb(1),r.ic("selectedMonth",t.selectedMonth),r.Bb(6),r.ic("ngSwitch",t.loadingState),r.Bb(1),r.ic("ngSwitchCase",t.loadingStates.loading),r.Bb(1),r.ic("ngSwitchCase",t.loadingStates.err),r.Bb(1),r.ic("ngIf",r.fc(11,5,t.reminders$)))},styles:["[_nghost-%COMP%]{display:block;margin:-24px}.header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:0 16px;height:63px}.reminders[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-gap:16px;padding:16px}.scrollbar[_ngcontent-%COMP%]{max-height:calc(100vh - 64px)}"]}),_),C=c("STbY"),k=c("NFeN"),R=c("ofXK"),O=function(e){return{isActive:e}};function P(e,t){if(1&e){var n=r.Tb();r.Sb(0,"button",6),r.Zb("click",function(){r.pc(n);var e=t.$implicit;return r.dc(2).select(e)}),r.Ac(1),r.Rb()}if(2&e){var i=t.$implicit,c=r.dc(2);r.ic("ngClass",r.kc(2,O,i===c.selectedMonth)),r.Bb(1),r.Cc(" ",i.name," ")}}function x(e,t){if(1&e&&(r.Sb(0,"div",4),r.yc(1,P,2,4,"button",5),r.Rb()),2&e){var n=r.dc();r.Bb(1),r.ic("ngForOf",n.months)}}var B,N=((B=function(){function t(){e(this,t),this.months=u.a,this.selectedMonth=u.b[0],this.selectionChange=new r.o}return n(t,[{key:"select",value:function(e){this.selectionChange.emit(e)}}]),t}()).\u0275fac=function(e){return new(e||B)},B.\u0275cmp=r.Gb({type:B,selectors:[["ntv-time-range-selector"]],inputs:{selectedMonth:"selectedMonth"},outputs:{selectionChange:"selectionChange"},decls:7,vars:2,consts:[[1,"time-range-selector",3,"matMenuTriggerFor"],["overlapTrigger",""],["intervalSelect","matMenu"],["matMenuContent",""],[1,"menu"],["mat-menu-item","",3,"ngClass","click",4,"ngFor","ngForOf"],["mat-menu-item","",3,"ngClass","click"]],template:function(e,t){if(1&e&&(r.Sb(0,"h2",0),r.Ac(1),r.Sb(2,"mat-icon"),r.Ac(3,"arrow_drop_down"),r.Rb(),r.Rb(),r.Sb(4,"mat-menu",1,2),r.yc(6,x,2,1,"ng-template",3),r.Rb()),2&e){var n=r.nc(5);r.ic("matMenuTriggerFor",n),r.Bb(1),r.Cc(" ",t.selectedMonth.name," ")}},directives:[C.e,k.a,C.a,C.b,R.j,C.c,R.i],styles:[".time-range-selector[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer}.menu[_ngcontent-%COMP%]{max-height:400px}"]}),B),A=c("bTqV"),j=c("f0Cb"),I=c("4Kj8"),F=function(e){return{width:e}};function G(e,t){if(1&e&&(r.Sb(0,"div",9),r.Sb(1,"p",10),r.Ac(2),r.ec(3,"titlecase"),r.Rb(),r.Sb(4,"div",11),r.Sb(5,"div",12),r.Ac(6,"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u043b\u0438 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439"),r.Rb(),r.Sb(7,"div",13),r.Nb(8,"div",14),r.Nb(9,"span",15),r.Sb(10,"p",16),r.Ac(11),r.Rb(),r.Nb(12,"span",15),r.Rb(),r.Rb(),r.Sb(13,"div",11),r.Sb(14,"div",12),r.Ac(15,"\u0417\u0430\u043a\u0430\u0437\u0430\u043b\u0438 \u0435\u0449\u0435"),r.Rb(),r.Sb(16,"div",13),r.Nb(17,"div",17),r.Nb(18,"span",15),r.Sb(19,"p",16),r.Ac(20),r.Rb(),r.Nb(21,"span",15),r.Rb(),r.Rb(),r.Rb()),2&e){var n=t.$implicit,i=r.dc(2);r.Bb(2),r.Dc("",r.fc(3,12,n.orderType)," (",n.total,")"),r.Bb(6),r.ic("ngStyle",r.kc(14,F,i.getPersentString(n.total,n.sended))),r.Bb(1),r.ic("ngStyle",r.kc(16,F,i.getPersentString(n.total,n.sended))),r.Bb(2),r.Dc("",n.sended," (",i.getPersentString(n.total,n.sended),")"),r.Bb(1),r.ic("ngStyle",r.kc(18,F,i.getPersentString(n.total,n.sended))),r.Bb(5),r.ic("ngStyle",r.kc(20,F,i.getPersentString(n.total,n.didNewOrder))),r.Bb(1),r.ic("ngStyle",r.kc(22,F,i.getPersentString(n.total,n.didNewOrder))),r.Bb(2),r.Dc("",n.didNewOrder," (",i.getPersentString(n.total,n.didNewOrder),")"),r.Bb(1),r.ic("ngStyle",r.kc(24,F,i.getPersentString(n.total,n.didNewOrder)))}}function T(e,t){if(1&e&&(r.Sb(0,"div",7),r.yc(1,G,22,26,"div",8),r.Rb()),2&e){var n=t.ngIf;r.Bb(1),r.ic("ngForOf",n)}}function $(e,t){1&e&&r.Nb(0,"ntv-spinner",18),2&e&&r.ic("diameter",16)}function D(e,t){1&e&&(r.Sb(0,"p"),r.Ac(1,"\u043a\u0430\u043a\u043e\u0435-\u0442\u043e \u0433\u043e\u0432\u043d\u043e"),r.Rb())}var Z,J,E,K=((Z=function(){function t(n,i){e(this,t),this.cs=n,this.dialog=i,this.selectedMonth=u.b[0],this.loadingStates=g.a}return n(t,[{key:"ngOnInit",value:function(){this.setActiveMonth(this.selectedMonth)}},{key:"setActiveMonth",value:function(e){var t=this;console.log(e),this.loadingState=g.a.loading,this.conversion$=this.cs.getConversion(e.date).pipe(Object(l.a)(function(){t.loadingState=g.a.default,t.selectedMonth=e}),Object(b.a)(function(e){return t.loadingState=g.a.err,Object(d.a)(e)}))}},{key:"getPersentString",value:function(e,t){return Math.round(100/e*t)+"%"}},{key:"toReminderList",value:function(){var e=this;this.dialog.open(w,{width:"100%",height:"100%",maxWidth:"100%",data:this.selectedMonth}).afterClosed().subscribe(function(){e.setActiveMonth(e.selectedMonth)})}}]),t}()).\u0275fac=function(e){return new(e||Z)(r.Mb(m),r.Mb(h.b))},Z.\u0275cmp=r.Gb({type:Z,selectors:[["ntv-conversion"]],decls:11,vars:7,consts:[[1,"header"],[3,"selectedMonth","selectionChange"],["mat-icon-button","",3,"click"],["class","conversion",4,"ngIf"],[3,"ngSwitch"],[3,"diameter",4,"ngSwitchCase"],[4,"ngSwitchCase"],[1,"conversion"],["class","conversion__item",4,"ngFor","ngForOf"],[1,"conversion__item"],[1,"conversion__item-title"],[1,"conversion__item-data"],[1,"body-4"],[1,"bar"],[1,"bar__scale","bar__scale--sended",3,"ngStyle"],[1,"bar__scale-value-color-changer",3,"ngStyle"],[1,"bar__text"],[1,"bar__scale","bar__scale--did-new-order",3,"ngStyle"],[3,"diameter"]],template:function(e,t){1&e&&(r.Sb(0,"div",0),r.Sb(1,"ntv-time-range-selector",1),r.Zb("selectionChange",function(e){return t.setActiveMonth(e)}),r.Rb(),r.Sb(2,"button",2),r.Zb("click",function(){return t.toReminderList()}),r.Sb(3,"mat-icon"),r.Ac(4,"launch"),r.Rb(),r.Rb(),r.Rb(),r.Nb(5,"mat-divider"),r.yc(6,T,2,1,"div",3),r.ec(7,"async"),r.Qb(8,4),r.yc(9,$,1,1,"ntv-spinner",5),r.yc(10,D,2,0,"p",6),r.Pb()),2&e&&(r.Bb(1),r.ic("selectedMonth",t.selectedMonth),r.Bb(5),r.ic("ngIf",r.fc(7,5,t.conversion$)),r.Bb(2),r.ic("ngSwitch",t.loadingState),r.Bb(1),r.ic("ngSwitchCase",t.loadingStates.loading),r.Bb(1),r.ic("ngSwitchCase",t.loadingStates.err))},directives:[N,A.a,k.a,j.a,R.k,R.m,R.n,R.j,R.l,I.a],pipes:[R.b,R.r],styles:["[_nghost-%COMP%]{display:block;width:100%}.conversion[_ngcontent-%COMP%]{display:grid;grid-gap:16px;padding:16px 0}.conversion__item[_ngcontent-%COMP%]{display:grid;grid-gap:4px}.conversion__item-title[_ngcontent-%COMP%]{font-weight:700}.bar[_ngcontent-%COMP%]{width:100%;height:32px;border-radius:4px;overflow:hidden;background-color:#e8e8e8;display:flex;align-items:center;justify-content:space-between;padding:0 4px}.bar[_ngcontent-%COMP%], .bar__text[_ngcontent-%COMP%]{position:relative}.bar__text[_ngcontent-%COMP%]{color:#000}.bar__scale[_ngcontent-%COMP%], .bar__scale-value-color-changer[_ngcontent-%COMP%]{position:absolute;top:0;left:0;height:100%}.bar__scale-value-color-changer[_ngcontent-%COMP%]{right:0;bottom:0;background:#fff;mix-blend-mode:difference}.bar__scale--total[_ngcontent-%COMP%]{width:100%;background-color:#0288d1}.bar__scale--sended[_ngcontent-%COMP%]{background-color:#ffa000}.bar__scale--did-new-order[_ngcontent-%COMP%]{background-color:#388e3c}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}"]}),Z),Q=[{path:"",component:(J=function(){function t(){e(this,t)}return n(t,[{key:"ngOnInit",value:function(){}}]),t}(),J.\u0275fac=function(e){return new(e||J)},J.\u0275cmp=r.Gb({type:J,selectors:[["ntv-dashboard"]],decls:3,vars:0,consts:[[1,"dashboard"],[1,"widget"]],template:function(e,t){1&e&&(r.Sb(0,"div",0),r.Sb(1,"mat-card",1),r.Nb(2,"ntv-conversion"),r.Rb(),r.Rb())},directives:[s.a,K],styles:[".widget[_ngcontent-%COMP%]{min-height:500px}.dashboard[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));grid-gap:16px;padding:16px}"]}),J)}],z=((E=function t(){e(this,t)}).\u0275mod=r.Kb({type:E}),E.\u0275inj=r.Jb({factory:function(e){return new(e||E)},imports:[[o.h.forChild(Q)],o.h]}),E),L=c("PCNd"),W=c("5dmV"),V=c("e1Hi"),X=c("bSwM");function Y(e,t){1&e&&(r.Sb(0,"span"),r.Ac(1,"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."),r.Rb())}function q(e,t){1&e&&(r.Sb(0,"span"),r.Ac(1,"\u041e\u0448\u0438\u0431\u043a\u0430"),r.Rb())}function H(e,t){1&e&&(r.Sb(0,"span"),r.Ac(1,"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"),r.Rb())}var U,ee,te=((U=function(){function t(n){e(this,t),this.cs=n,this.loadingStates=g.a}return n(t,[{key:"ngOnInit",value:function(){this.phone="+7"+this.reminder.phone}},{key:"change",value:function(e){var t=this;this.loadingState=this.loadingStates.loading,this.cs.markReminderSended({id:this.reminder.personId,date:this.selectedMonth.date,sended:e}).pipe(Object(l.a)(function(){t.loadingState=t.loadingStates.default,t.reminder.sended=e}),Object(b.a)(function(e){return t.loadingState=t.loadingStates.err,Object(d.a)(e)})).subscribe()}}]),t}()).\u0275fac=function(e){return new(e||U)(r.Mb(m))},U.\u0275cmp=r.Gb({type:U,selectors:[["ntv-reminder"]],inputs:{reminder:"reminder",selectedMonth:"selectedMonth"},decls:7,vars:7,consts:[[1,"card"],[3,"value","overline","clip"],["color","accent",3,"checked","click"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(e,t){1&e&&(r.Sb(0,"mat-card",0),r.Nb(1,"ntv-overlined",1),r.Sb(2,"mat-checkbox",2),r.Zb("click",function(e){return e.preventDefault(),t.change(!t.reminder.sended)}),r.Qb(3,3),r.yc(4,Y,2,0,"span",4),r.yc(5,q,2,0,"span",4),r.yc(6,H,2,0,"span",5),r.Pb(),r.Rb(),r.Rb()),2&e&&(r.Bb(1),r.ic("value",t.reminder.inst?t.reminder.inst:t.phone)("overline",t.reminder.inst?"\u0438\u043d\u0441\u0442\u0430\u0433\u0440\u0430\u043c\u043c":"\u0442\u0435\u043b\u0435\u0444\u043e\u043d")("clip",t.reminder.inst?t.reminder.inst:t.phone),r.Bb(1),r.ic("checked",t.reminder.sended),r.Bb(1),r.ic("ngSwitch",t.loadingState),r.Bb(1),r.ic("ngSwitchCase",t.loadingStates.loading),r.Bb(1),r.ic("ngSwitchCase",t.loadingStates.err))},directives:[s.a,V.a,X.a,R.m,R.n,R.o],styles:[".card[_ngcontent-%COMP%]{display:grid;grid-gap:8px}"]}),U),ne=c("G1Gu"),ie=((ee=function t(){e(this,t)}).\u0275mod=r.Kb({type:ee}),ee.\u0275inj=r.Jb({factory:function(e){return new(e||ee)},imports:[[z,L.a,W.a]]}),ee);r.rc(w,[N,A.a,k.a,j.a,ne.a,R.m,R.n,I.a,R.k,R.j,te],[R.b])}}])}();