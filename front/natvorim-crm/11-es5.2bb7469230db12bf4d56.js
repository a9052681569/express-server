!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=i(e);if(t){var c=i(this).constructor;r=Reflect.construct(n,arguments,c)}else r=n.apply(this,arguments);return o(this,r)}}function o(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"5tjk":function(t,o,i){"use strict";i.r(o),i.d(o,"PeopleModule",function(){return Qe});var a,d,u,l=i("tyNb"),b=i("XNiG"),p=i("LRne"),f=i("1G5W"),m=i("Kj3r"),h=i("eIep"),g=i("HnnZ"),v=i("fXoL"),S=i("l7P3"),y=i("3Pt+"),O=i("X1dv"),_=i("ofXK"),R=i("G1Gu"),k=i("kmnG"),x=i("qFsG"),C=i("/1cH"),P=i("FKr1"),M=i("4Kj8"),I=i("7EHt"),w=i("0IaG"),N=i("TaCb"),j=i("bTqV"),B=((a=function(){function e(t,r,n,o){c(this,e),this.data=t,this.fb=r,this.store=n,this.hs=o}return s(e,[{key:"ngOnInit",value:function(){this.editPersonForm=this.fb.group({name:this.data.person.name,email:this.data.person.contacts.email||"",inst:this.data.person.contacts.inst||"",phone:[this.data.person.contacts.phone||"",this.hs.phoneValidator],city:this.data.person.address.city,address:this.data.person.address.address})}},{key:"patchPerson",value:function(){var e,t,r,n,o,i,c={id:this.data.person.id,name:null===(e=this.editPersonForm.get("name"))||void 0===e?void 0:e.value,contacts:{email:null===(t=this.editPersonForm.get("email"))||void 0===t?void 0:t.value,inst:null===(r=this.editPersonForm.get("inst"))||void 0===r?void 0:r.value,phone:null===(n=this.editPersonForm.get("phone"))||void 0===n?void 0:n.value},address:{city:null===(o=this.editPersonForm.get("city"))||void 0===o?void 0:o.value,address:null===(i=this.editPersonForm.get("address"))||void 0===i?void 0:i.value}};this.store.dispatch(g.a.patchPending({customer:c}))}}]),e}()).\u0275fac=function(e){return new(e||a)(v.Mb(w.a),v.Mb(y.e),v.Mb(S.h),v.Mb(N.a))},a.\u0275cmp=v.Gb({type:a,selectors:[["ntv-edit-person-dialog"]],decls:27,vars:1,consts:[[1,"form",3,"formGroup","ngSubmit"],["appearance","standard"],["matInput","","formControlName","name"],["matInput","","formControlName","email"],["matInput","","formControlName","inst"],["matInput","","formControlName","phone"],["matInput","","formControlName","city"],["matInput","","formControlName","address"],["mat-flat-button","","type","submit"]],template:function(e,t){1&e&&(v.Sb(0,"form",0),v.Zb("ngSubmit",function(){return t.patchPerson()}),v.Sb(1,"mat-form-field",1),v.Sb(2,"mat-label"),v.zc(3,"\u0424\u0418\u041e"),v.Rb(),v.Nb(4,"input",2),v.Rb(),v.Sb(5,"mat-form-field",1),v.Sb(6,"mat-label"),v.zc(7,"E-mail"),v.Rb(),v.Nb(8,"input",3),v.Rb(),v.Sb(9,"mat-form-field",1),v.Sb(10,"mat-label"),v.zc(11,"\u0418\u043d\u0441\u0442\u0430\u0433\u0440\u0430\u043c"),v.Rb(),v.Nb(12,"input",4),v.Rb(),v.Sb(13,"mat-form-field",1),v.Sb(14,"mat-label"),v.zc(15,"\u0422\u0435\u043b\u0435\u0444\u043e\u043d"),v.Rb(),v.Nb(16,"input",5),v.Rb(),v.Sb(17,"mat-form-field",1),v.Sb(18,"mat-label"),v.zc(19,"\u0413\u043e\u0440\u043e\u0434"),v.Rb(),v.Nb(20,"input",6),v.Rb(),v.Sb(21,"mat-form-field",1),v.Sb(22,"mat-label"),v.zc(23,"\u041e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0430\u0434\u0440\u0435\u0441"),v.Rb(),v.Nb(24,"input",7),v.Rb(),v.Sb(25,"button",8),v.zc(26,"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c"),v.Rb(),v.Rb()),2&e&&v.ic("formGroup",t.editPersonForm)},directives:[y.v,y.o,y.h,k.c,k.f,x.b,y.c,y.n,y.g,j.a],styles:["[_nghost-%COMP%]{display:block;min-width:500px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),a),z=i("Wxx3"),F=i("+PC+"),T=i("UXJo"),G=i("NFeN"),$=i("e1Hi"),E=i("ufcJ"),A=i("z6cu"),Z=i("vkgz"),D=i("JIr8"),K=i("hgo/"),Q=i("hS0P"),J=i("dNgK"),W=((d=function(t){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}(i,t);var o=n(i);function i(t,r){var n;return c(this,i),(n=o.call(this,q)).ordersService=t,n.snack=r,n.getOrders=n.effect(function(e){return e.pipe(Object(h.a)(function(e){return n.addOrdersPending(),n.ordersService.getOrders(e).pipe(Object(Z.a)(function(e){console.log(e),n.addOrdersSuccess(e)}),Object(D.a)(function(e){return n.addOrdersError(),Object(A.a)(e)}))}))}),n.removeOrder=n.effect(function(e){return e.pipe(Object(h.a)(function(e){return n.ordersService.removeOrder(e).pipe(Object(Z.a)(function(e){var t=e.id;n.snack.open("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u043b\u0438 \u0437\u0430\u043a\u0430\u0437",void 0,{duration:3e3}),n.removeOrderSuccess(t)}),Object(D.a)(function(e){return n.snack.open("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0443\u0434\u0430\u043b\u0435\u043d\u0438\u0438 \u0437\u0430\u043a\u0430\u0437\u0430",void 0,{duration:3e3}),Object(A.a)(e)}))}))}),n.removeOrderSuccess=n.updater(function(e,t){var r=e.orders.slice().filter(function(e){return e.id!==t});return Object.assign(Object.assign({},e),{orders:r,removeLoadingState:K.a.default})}),n.patchOrder=n.updater(function(e,t){var r=e.orders.slice();return r[r.findIndex(function(e){return e.id===t.id})]=Object.assign({},t),Object.assign(Object.assign({},e),{orders:r})}),n.addOrdersPending=n.updater(function(e){return Object.assign(Object.assign({},e),{loading:!0})}),n.addOrdersSuccess=n.updater(function(t,r){return Object.assign(Object.assign({},t),{orders:[].concat(e(t.orders),e(r)),loading:!1,err:!1})}),n.addOrdersError=n.updater(function(e){return Object.assign(Object.assign({},e),{err:!0,loading:!1})}),n}return i}(E.a)).\u0275fac=function(e){return new(e||d)(v.Wb(Q.a),v.Wb(J.a))},d.\u0275prov=v.Ib({token:d,factory:d.\u0275fac}),d),q={orders:[],loading:!1,err:!1},X=i("3tz+"),H=((u=function e(t){c(this,e),this.data=t}).\u0275fac=function(e){return new(e||u)(v.Mb(w.a))},u.\u0275cmp=v.Gb({type:u,selectors:[["ntv-order-structure-dialog"]],decls:1,vars:1,consts:[[3,"orderStructure"]],template:function(e,t){1&e&&v.Nb(0,"ntv-order-structure",0),2&e&&v.ic("orderStructure",t.data.orderStructure)},directives:[X.a],styles:[""]}),u),L=i("Qw0g"),U=i("Wcn/"),V=i("Wp6s"),Y=i("f0Cb"),ee=i("bSwM"),te=i("d3UM"),re=i("q6z+");function ne(e,t){if(1&e&&(v.Sb(0,"mat-option",17),v.zc(1),v.Rb()),2&e){var r=t.$implicit;v.ic("value",r),v.Bb(1),v.Bc(" ",r," ")}}function oe(e,t){if(1&e&&(v.Sb(0,"mat-option",17),v.zc(1),v.Rb()),2&e){var r=t.$implicit;v.ic("value",r.date),v.Bb(1),v.Bc(" ",r.name," ")}}function ie(e,t){if(1&e&&(v.Sb(0,"mat-option",17),v.zc(1),v.Rb()),2&e){var r=t.$implicit;v.ic("value",r),v.Bb(1),v.Bc(" ",r," ")}}function ce(e,t){1&e&&(v.Sb(0,"span",18),v.zc(1," \u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c... "),v.Nb(2,"ntv-spinner",19),v.Rb()),2&e&&(v.Bb(2),v.ic("diameter",16))}function ae(e,t){1&e&&(v.Sb(0,"span",18),v.zc(1," \u041e\u0448\u0438\u0431\u043a\u0430, \u043d\u0430\u0436\u043c\u0438 \u0447\u0442\u043e\u0431\u044b \u043f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0441\u043d\u043e\u0432\u0430 "),v.Sb(2,"mat-icon",20),v.zc(3,"error"),v.Rb(),v.Rb())}function se(e,t){1&e&&(v.Qb(0),v.zc(1," \u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c "),v.Pb())}var de,ue=((de=function(){function e(t,r,n,o){c(this,e),this.dialogRef=t,this.order=r,this.fb=n,this.ordersService=o,this.loadingStates=K.a,this.months=L.a,this.orderTypes=Object.values(U.b),this.shipmentTypes=Object.values(U.d)}return s(e,[{key:"ngOnInit",value:function(){this.editOrderForm=this.fb.group({comment:this.order.comment,sended:this.order.sended,shipmentDate:this.order.shipmentDate,shipmentType:this.order.shipmentType,trackNumber:this.order.trackNumber,type:this.order.type,orderStructure:this.fb.group({kits:this.fb.array([]),theatres:this.fb.array([])})})}},{key:"patchOrder",value:function(){var e=this,t=Object.assign({id:this.order.id,personId:this.order.personId},this.editOrderForm.value);this.loadingState=this.loadingStates.loading,this.ordersService.patchOrder(t).pipe(Object(Z.a)(function(t){e.loadingState=null,e.dialogRef.close(t)}),Object(D.a)(function(t){return e.loadingState=e.loadingStates.err,Object(A.a)(t)})).subscribe()}},{key:"orderStructure",get:function(){return this.editOrderForm.get("orderStructure")}}]),e}()).\u0275fac=function(e){return new(e||de)(v.Mb(w.f),v.Mb(w.a),v.Mb(y.e),v.Mb(Q.a))},de.\u0275cmp=v.Gb({type:de,selectors:[["ntv-edit-order-dialog"]],decls:44,vars:11,consts:[[1,"scrollbar"],[1,"form",3,"formGroup","ngSubmit"],[1,"form__block"],[1,"select-card"],["appearance","standard"],["matInput","","formControlName","comment"],[3,"vertical"],[1,"form__block-colomn"],["formControlName","sended"],["formControlName","type"],[3,"value",4,"ngFor","ngForOf"],["formControlName","shipmentDate"],["formControlName","shipmentType"],[3,"orderStructure","orderStructureGroup"],["mat-raised-button","","type","submit",1,"submit-button",3,"ngSwitch"],["class","submit-button__content",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"value"],[1,"submit-button__content"],[1,"submit-button__spinner",3,"diameter"],[1,"submit-button__error-icon"]],template:function(e,t){1&e&&(v.Sb(0,"ng-scrollbar",0),v.Sb(1,"form",1),v.Zb("ngSubmit",function(){return t.patchOrder()}),v.Sb(2,"h4"),v.zc(3,"\u041e \u0437\u0430\u043a\u0430\u0437\u0435"),v.Rb(),v.Sb(4,"div",2),v.Sb(5,"mat-card",3),v.Sb(6,"mat-form-field",4),v.Sb(7,"mat-label"),v.zc(8,"\u041a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"),v.Rb(),v.Nb(9,"textarea",5),v.Rb(),v.Rb(),v.Nb(10,"mat-divider",6),v.Sb(11,"div",7),v.Sb(12,"mat-card",3),v.Sb(13,"mat-checkbox",8),v.zc(14,"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e"),v.Rb(),v.Rb(),v.Sb(15,"mat-card",3),v.Sb(16,"mat-form-field",4),v.Sb(17,"mat-label"),v.zc(18,"\u0422\u0438\u043f"),v.Rb(),v.Sb(19,"mat-select",9),v.xc(20,ne,2,2,"mat-option",10),v.Rb(),v.Rb(),v.Rb(),v.Rb(),v.Rb(),v.Sb(21,"h4"),v.zc(22,"\u041e\u0442\u043f\u0440\u0430\u0432\u043a\u0430"),v.Rb(),v.Sb(23,"div",2),v.Sb(24,"mat-card",3),v.Sb(25,"mat-form-field",4),v.Sb(26,"mat-label"),v.zc(27,"\u0414\u0430\u0442\u0430"),v.Rb(),v.Sb(28,"mat-select",11),v.xc(29,oe,2,2,"mat-option",10),v.Rb(),v.Rb(),v.Rb(),v.Nb(30,"mat-divider",6),v.Sb(31,"mat-card",3),v.Sb(32,"mat-form-field",4),v.Sb(33,"mat-label"),v.zc(34,"\u0422\u0438\u043f"),v.Rb(),v.Sb(35,"mat-select",12),v.xc(36,ie,2,2,"mat-option",10),v.Rb(),v.Rb(),v.Rb(),v.Rb(),v.Sb(37,"h4"),v.zc(38,"\u0427\u0442\u043e \u0432\u0435\u0437\u0435\u043c"),v.Rb(),v.Nb(39,"ntv-order-structure-form",13),v.Sb(40,"button",14),v.xc(41,ce,3,1,"span",15),v.xc(42,ae,4,0,"span",15),v.xc(43,se,2,0,"ng-container",16),v.Rb(),v.Rb(),v.Rb()),2&e&&(v.Bb(1),v.ic("formGroup",t.editOrderForm),v.Bb(9),v.ic("vertical",!0),v.Bb(10),v.ic("ngForOf",t.orderTypes),v.Bb(9),v.ic("ngForOf",t.months),v.Bb(1),v.ic("vertical",!0),v.Bb(6),v.ic("ngForOf",t.shipmentTypes),v.Bb(3),v.ic("orderStructure",t.order.orderStructure)("orderStructureGroup",t.orderStructure),v.Bb(1),v.ic("ngSwitch",t.loadingState),v.Bb(1),v.ic("ngSwitchCase",t.loadingStates.loading),v.Bb(1),v.ic("ngSwitchCase",t.loadingStates.err))},directives:[R.a,y.v,y.o,y.h,V.a,k.c,k.f,x.b,y.c,y.n,y.g,Y.a,ee.a,te.a,_.j,re.a,j.a,_.m,_.n,_.o,P.n,M.a,G.a],styles:["[_nghost-%COMP%]{display:block;min-width:500px;margin:-24px}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:16px;width:100%;height:100%;padding:16px}.form__block[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1px 1fr;grid-gap:16px;width:100%}.form__block-colomn[_ngcontent-%COMP%]{width:100%}.form__array[_ngcontent-%COMP%], .form__block-colomn[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.form__array-item[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 40px;grid-template-rows:repeat(auto-fill,41px);grid-gap:16px}.form__array-title[_ngcontent-%COMP%]{gap:16px}.form__array-title[_ngcontent-%COMP%], .submit-button__content[_ngcontent-%COMP%]{display:flex;align-items:center}.submit-button__spinner[_ngcontent-%COMP%]{margin-top:0;margin-left:8px}.submit-button__error-icon[_ngcontent-%COMP%]{margin-left:8px}.scrollbar[_ngcontent-%COMP%]{max-height:90vh}.select-card[_ngcontent-%COMP%]{display:grid}"]}),de),le=i("hA4r"),be=i("8prF"),pe=i("7s2l");function fe(e,t){if(1&e){var r=v.Tb();v.Sb(0,"ntv-overlined",11),v.Zb("click",function(){return v.pc(r),v.dc(2).showOrderStructureDialog()}),v.Rb()}2&e&&v.ic("overline","\u043d\u0430\u0431\u043e\u0440\u044b")("value","\u043d\u0430\u0436\u043c\u0438 \u0434\u043b\u044f \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u0430")}function me(e,t){if(1&e&&(v.Qb(0),v.Nb(1,"ntv-overlined",13),v.Nb(2,"ntv-kit",14),v.Pb()),2&e){var r=v.dc(3);v.Bb(2),v.ic("kit",r.order.orderStructure.kits[0])}}function he(e,t){if(1&e&&(v.Qb(0),v.Nb(1,"ntv-overlined",15),v.Nb(2,"ntv-kit",14),v.Pb()),2&e){var r=v.dc(3);v.Bb(2),v.ic("kit",r.order.orderStructure.theatres[0])}}function ge(e,t){if(1&e&&(v.xc(0,me,3,1,"ng-container",12),v.xc(1,he,3,1,"ng-container",12)),2&e){var r=v.dc(2);v.ic("ngIf",r.order.orderStructure.kits.length),v.Bb(1),v.ic("ngIf",r.order.orderStructure.theatres.length)}}function ve(e,t){if(1&e){var r=v.Tb();v.Sb(0,"mat-card",1),v.Sb(1,"div",2),v.Nb(2,"ntv-overlined",3),v.Nb(3,"ntv-overlined",3),v.Nb(4,"ntv-overlined",3),v.xc(5,fe,1,2,"ntv-overlined",4),v.xc(6,ge,2,2,"ng-template",null,5,v.yc),v.Nb(8,"ntv-sended-checkbox",6),v.Nb(9,"ntv-track-field",7),v.Rb(),v.Nb(10,"ntv-overlined",8),v.Sb(11,"button",9),v.Zb("click",function(){return v.pc(r),v.dc().showEditor()}),v.Sb(12,"mat-icon"),v.zc(13,"edit"),v.Rb(),v.Rb(),v.Sb(14,"button",10),v.Zb("click",function(){return v.pc(r),v.dc().removeOrder()}),v.Sb(15,"mat-icon"),v.zc(16,"delete"),v.Rb(),v.Rb(),v.Rb()}if(2&e){var n=v.nc(7),o=v.dc();v.Bb(2),v.ic("overline","\u0442\u0438\u043f \u0437\u0430\u043a\u0430\u0437\u0430")("value",o.order.type),v.Bb(1),v.ic("overline","\u043e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c")("value",o.order.shipmentDate),v.Bb(1),v.ic("overline","\u043f\u043e\u0432\u0435\u0437\u0435\u0442")("value",o.order.shipmentType||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"),v.Bb(1),v.ic("ngIf",o.moreThanOneKit)("ngIfElse",n),v.Bb(3),v.ic("orderId",o.order.id)("sendedStatus",o.order.sended),v.Bb(1),v.ic("orderId",o.order.id)("trackNumber",o.order.trackNumber),v.Bb(1),v.ic("overline","\u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439")("value",o.order.comment||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d")}}var Se,ye=((Se=function(){function e(t,r,n){c(this,e),this.dialog=t,this.ordersStore=r,this.clipService=n,this.loadingStates=K.a}return s(e,[{key:"ngOnInit",value:function(){this.ordersState=this.ordersStore.select(function(e){return e})}},{key:"showOrderStructureDialog",value:function(){this.dialog.open(H,{data:{orderStructure:this.order.orderStructure}})}},{key:"showEditor",value:function(){var e=this;this.dialog.open(ue,{data:this.order}).afterClosed().subscribe(function(t){t&&e.ordersStore.patchOrder(t)})}},{key:"removeOrder",value:function(){var e=this;this.dialog.open(z.a,{data:{text:"\u0422\u043e\u0447\u043d\u043e \u0443\u0434\u0430\u043b\u0438\u0442\u044c?",confirmText:"\u0442\u043e\u0447\u043d\u043e",declineText:"\u043f\u0435\u0440\u0435\u0434\u0443\u043c\u0430\u043b\u044c",action:function(){e.ordersStore.removeOrder(e.order.id)}}})}},{key:"moreThanOneKit",get:function(){var e=this.order.orderStructure.kits.length,t=this.order.orderStructure.theatres.length;return e>1||t>1||e>0&&t>0}}]),e}()).\u0275fac=function(e){return new(e||Se)(v.Mb(w.b),v.Mb(W),v.Mb(F.a))},Se.\u0275cmp=v.Gb({type:Se,selectors:[["ntv-person-order"]],inputs:{order:"order"},decls:2,vars:3,consts:[["class","order",4,"ngIf"],[1,"order"],[1,"order__data"],[3,"overline","value"],["class","order__kits",3,"overline","value","click",4,"ngIf","ngIfElse"],["oneKit",""],[3,"orderId","sendedStatus"],[3,"orderId","trackNumber"],[1,"order__comment",3,"overline","value"],["mat-icon-button","",1,"order__edit",3,"click"],["mat-icon-button","",1,"order__remove",3,"click"],[1,"order__kits",3,"overline","value","click"],[4,"ngIf"],["overline","\u0447\u0442\u043e \u043f\u0440\u0438\u0432\u0435\u0437\u0442\u0438","value","\u043d\u0430\u0431\u043e\u0440"],[3,"kit"],["overline","\u0447\u0442\u043e \u043f\u0440\u0438\u0432\u0435\u0437\u0442\u0438","value","\u0442\u0435\u0430\u0442\u0440"]],template:function(e,t){1&e&&(v.xc(0,ve,17,14,"mat-card",0),v.ec(1,"async")),2&e&&v.ic("ngIf",v.fc(1,1,t.ordersState))},directives:[_.k,V.a,$.a,le.a,be.a,j.a,G.a,pe.a],pipes:[_.b],styles:['[_nghost-%COMP%]{display:block}.order[_ngcontent-%COMP%]{display:grid;grid-template-areas:"data edit remove" "comment comment comment";grid-template-columns:1fr 40px 40px;grid-template-rows:auto auto;grid-gap:8px}.order__data[_ngcontent-%COMP%]{display:flex;gap:16px;flex-wrap:wrap;grid-area:data}.order__comment[_ngcontent-%COMP%]{grid-area:comment}.order__edit[_ngcontent-%COMP%]{grid-area:edit}.order__remove[_ngcontent-%COMP%]{grid-area:remove}.order__kits[_ngcontent-%COMP%]{cursor:pointer}.order__track-control-spinner[_ngcontent-%COMP%]{margin-top:16px}.order__track-copy-icon[_ngcontent-%COMP%]{cursor:pointer}']}),Se);function Oe(e,t){1&e&&v.Nb(0,"ntv-person-order",4),2&e&&v.ic("order",t.$implicit)}function _e(e,t){1&e&&(v.Sb(0,"p"),v.zc(1,"\u0423 \u043a\u043b\u0438\u0435\u043d\u0442\u0430 \u043d\u0435\u0442 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"),v.Rb())}function Re(e,t){if(1&e){var r=v.Tb();v.Sb(0,"p"),v.zc(1,"\u041e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 "),v.Sb(2,"span",5),v.Zb("click",function(){return v.pc(r),v.dc(2).getOrders()}),v.zc(3,"\u0435\u0449\u0435 \u0440\u0430\u0437"),v.Rb(),v.Rb()}}function ke(e,t){1&e&&v.Nb(0,"ntv-spinner",6),2&e&&v.ic("diameter",24)}function xe(e,t){if(1&e&&(v.Qb(0),v.Sb(1,"mat-accordion"),v.xc(2,Oe,1,1,"ntv-person-order",1),v.xc(3,_e,2,0,"p",0),v.Rb(),v.xc(4,Re,4,0,"p",0),v.Nb(5,"div",2),v.xc(6,ke,1,1,"ntv-spinner",3),v.Pb()),2&e){var r=t.ngIf;v.Bb(2),v.ic("ngForOf",r.orders),v.Bb(1),v.ic("ngIf",!r.orders.length&&!r.err&&!r.loading),v.Bb(1),v.ic("ngIf",r.err),v.Bb(2),v.ic("ngIf",r.loading)}}var Ce,Pe=((Ce=function(){function e(t){c(this,e),this.ordersStore=t}return s(e,[{key:"ngOnInit",value:function(){this.state$=this.ordersStore.select(function(e){return e}),this.getOrders()}},{key:"getOrders",value:function(){this.ordersStore.getOrders(this.personId)}}]),e}()).\u0275fac=function(e){return new(e||Ce)(v.Mb(W))},Ce.\u0275cmp=v.Gb({type:Ce,selectors:[["ntv-person-orders"]],inputs:{personId:"personId"},features:[v.Ab([W])],decls:2,vars:3,consts:[[4,"ngIf"],["class","order",3,"order",4,"ngFor","ngForOf"],["if",""],[3,"diameter",4,"ngIf"],[1,"order",3,"order"],[1,"text-button",3,"click"],[3,"diameter"]],template:function(e,t){1&e&&(v.xc(0,xe,7,4,"ng-container",0),v.ec(1,"async")),2&e&&v.ic("ngIf",v.fc(1,1,t.state$))},directives:[_.k,I.a,_.j,ye,M.a],pipes:[_.b],styles:[".text-button[_ngcontent-%COMP%]{color:red;cursor:pointer}.order[_ngcontent-%COMP%]{margin-bottom:8px}"]}),Ce);function Me(e,t){if(1&e&&v.Nb(0,"ntv-overlined",6),2&e){var r=t.$implicit;v.ic("clip",r.value)("overline",r.name)("value",r.value||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d")}}function Ie(e,t){if(1&e&&(v.Sb(0,"div",7),v.Sb(1,"h6",8),v.zc(2,"\u0410\u0434\u0440\u0435\u0441"),v.Rb(),v.Nb(3,"ntv-overlined",9),v.Nb(4,"ntv-overlined",10),v.Rb(),v.Sb(5,"h6"),v.zc(6,"\u0417\u0430\u043a\u0430\u0437\u044b"),v.Rb(),v.Nb(7,"ntv-person-orders",11)),2&e){var r=v.dc();v.Bb(3),v.ic("clip",r.person.address.city)("value",r.person.address.city||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"),v.Bb(1),v.ic("clip",r.person.address.address)("value",r.person.address.address||"\u043d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"),v.Bb(3),v.ic("personId",r.person.id)}}var we,Ne=((we=function(){function e(t,r,n,o){c(this,e),this.clipService=t,this.dialog=r,this.store=n,this.hs=o}return s(e,[{key:"ngOnInit",value:function(){this.contactItems=[{name:"\u041f\u043e\u0447\u0442\u0430",value:this.person.contacts.email||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"},{name:"\u0422\u0435\u043b\u0435\u0444\u043e\u043d",value:this.person.contacts.phone?this.hs.addRussianPhonePrefix(this.person.contacts.phone):"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"},{name:"\u0418\u043d\u0441\u0442\u0430\u0433\u0440\u0430\u043c",value:this.person.contacts.inst||"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d"}]}},{key:"showEditor",value:function(){this.dialog.open(B,{data:{person:this.person}})}},{key:"removeCustomer",value:function(){var e=this;this.dialog.open(z.a,{data:{text:"\u0423\u0434\u0430\u043b\u044f\u0435\u043c \u044d\u0442\u043e\u0433\u043e \u0442\u0438\u043f\u0430?",confirmText:"\u0434\u0430",declineText:"\u043d\u0435, \u043f\u043e\u0433\u043e\u0434\u044c",action:function(){e.store.dispatch(g.a.removePending({customerId:e.person.id}))}}})}}]),e}()).\u0275fac=function(e){return new(e||we)(v.Mb(F.a),v.Mb(w.b),v.Mb(S.h),v.Mb(N.a))},we.\u0275cmp=v.Gb({type:we,selectors:[["ntv-person"]],inputs:{person:"person"},decls:13,vars:3,consts:[[1,"person"],[1,"person__title",3,"cdkCopyToClipboard","cdkCopyToClipboardCopied","click"],[1,"person__description",3,"click"],["class","person__address-item",3,"clip","overline","value",4,"ngFor","ngForOf"],["mat-icon-button","",3,"click"],["matExpansionPanelContent",""],[1,"person__address-item",3,"clip","overline","value"],[1,"person__address"],[1,"person__address-title"],["overline","\u0433\u043e\u0440\u043e\u0434",1,"person__address-item",3,"clip","value"],["overline","\u043e\u0441\u0442\u0430\u043b\u044c\u043d\u043e\u0435",1,"person__address-item",3,"clip","value"],[3,"personId"]],template:function(e,t){1&e&&(v.Sb(0,"mat-expansion-panel",0),v.Sb(1,"mat-expansion-panel-header"),v.Sb(2,"mat-panel-title",1),v.Zb("cdkCopyToClipboardCopied",function(){return t.clipService.clip(t.person.name)})("click",function(e){return e.stopPropagation()}),v.zc(3),v.Rb(),v.Sb(4,"mat-panel-description",2),v.Zb("click",function(e){return e.stopPropagation()}),v.xc(5,Me,1,3,"ntv-overlined",3),v.Sb(6,"button",4),v.Zb("click",function(){return t.showEditor()}),v.Sb(7,"mat-icon"),v.zc(8,"edit"),v.Rb(),v.Rb(),v.Sb(9,"button",4),v.Zb("click",function(){return t.removeCustomer()}),v.Sb(10,"mat-icon"),v.zc(11,"delete"),v.Rb(),v.Rb(),v.Rb(),v.Rb(),v.xc(12,Ie,8,5,"ng-template",5),v.Rb()),2&e&&(v.Bb(2),v.ic("cdkCopyToClipboard",t.person.name),v.Bb(1),v.Bc(" ",t.person.name," "),v.Bb(2),v.ic("ngForOf",t.contactItems))},directives:[I.c,I.f,I.g,T.a,I.e,_.j,j.a,G.a,I.d,$.a,Pe],styles:['[_nghost-%COMP%]{display:block;overflow:hidden}.person__title[_ngcontent-%COMP%]{min-width:200px;max-width:200px}.person__description[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr) auto auto;grid-gap:16px}.person__address[_ngcontent-%COMP%]{display:grid;grid-template-areas:"title title" "item item";grid-template-columns:auto auto;grid-template-rows:auto auto}.person__address-title[_ngcontent-%COMP%]{grid-area:title}.person__address-item[_ngcontent-%COMP%]{cursor:pointer}.person.mat-expansion-panel[_ngcontent-%COMP%]{border-radius:0!important}']}),we);function je(e,t){if(1&e&&(v.Sb(0,"mat-option",9),v.zc(1),v.Rb()),2&e){var r=t.$implicit;v.ic("value",r),v.Bb(1),v.Bc(" ",r.name," ")}}function Be(e,t){1&e&&v.Nb(0,"ntv-spinner")}function ze(e,t){1&e&&v.Nb(0,"ntv-person",11),2&e&&v.ic("person",t.$implicit)}function Fe(e,t){if(1&e&&(v.Sb(0,"mat-accordion"),v.xc(1,ze,1,1,"ntv-person",10),v.Rb()),2&e){var r=v.dc().ngIf;v.Bb(1),v.ic("ngForOf",r.customers)}}function Te(e,t){1&e&&(v.Sb(0,"p"),v.zc(1,"\u041e\u0448\u0438\u0431\u043a\u0430"),v.Rb())}function Ge(e,t){if(1&e){var r=v.Tb();v.Sb(0,"ng-scrollbar",1),v.Sb(1,"div",2),v.Sb(2,"mat-form-field",3),v.Sb(3,"mat-label"),v.zc(4,"\u043f\u043e\u0438\u0441\u043a \u043f\u043e \u0438\u043c\u0435\u043d\u0438"),v.Rb(),v.Nb(5,"input",4),v.Sb(6,"mat-autocomplete",5,6),v.Zb("optionSelected",function(e){return v.pc(r),v.dc().setCustomer(e)}),v.xc(8,je,2,2,"mat-option",7),v.Rb(),v.Rb(),v.xc(9,Be,1,0,"ntv-spinner",8),v.xc(10,Fe,2,1,"mat-accordion",8),v.xc(11,Te,2,0,"p",8),v.Rb(),v.Rb()}if(2&e){var n=t.ngIf,o=v.nc(7),i=v.dc();v.Bb(5),v.ic("formControl",i.search)("matAutocomplete",o),v.Bb(3),v.ic("ngForOf",i.autocompleteOptions),v.Bb(1),v.ic("ngIf",n.loading),v.Bb(1),v.ic("ngIf",n.customers.length),v.Bb(1),v.ic("ngIf",n.err)}}var $e,Ee,Ae,Ze=[{path:"",component:($e=function(){function e(t,r,n){c(this,e),this.store=t,this.fb=r,this.peopleService=n,this.autocompleteOptions=[],this.destroyer$$=new b.a}return s(e,[{key:"ngOnInit",value:function(){this.state=this.store.select("customers"),this.store.dispatch(g.a.searchPending({query:""})),this.initSearch()}},{key:"ngOnDestroy",value:function(){this.destroyer$$.next(),this.destroyer$$.complete()}},{key:"setCustomer",value:function(e){this.store.dispatch(g.a.searchSuccess({customers:[e.option.value]})),this.search.setValue(e.option.value.name)}},{key:"initSearch",value:function(){var e=this;this.search=this.fb.control(""),this.search.valueChanges.pipe(Object(f.a)(this.destroyer$$),Object(m.a)(300)).subscribe(function(t){e.store.dispatch(g.a.searchPending({query:t}))})}},{key:"initAutocomplete",value:function(){var e=this;this.search.valueChanges.pipe(Object(f.a)(this.destroyer$$),Object(m.a)(300),Object(h.a)(function(t){return e.prevQuerry&&e.prevQuerry===t?Object(p.a)(e.autocompleteOptions):(e.prevQuerry=t,e.peopleService.searchCustomers(t))})).subscribe(function(t){e.autocompleteOptions=t})}}]),e}(),$e.\u0275fac=function(e){return new(e||$e)(v.Mb(S.h),v.Mb(y.e),v.Mb(O.a))},$e.\u0275cmp=v.Gb({type:$e,selectors:[["ntv-people"]],decls:2,vars:3,consts:[["class","scrollbar",4,"ngIf"],[1,"scrollbar"],[1,"people"],["appearance","standard",1,"search"],["matInput","",3,"formControl","matAutocomplete"],[3,"optionSelected"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"value"],[3,"person",4,"ngFor","ngForOf"],[3,"person"]],template:function(e,t){1&e&&(v.xc(0,Ge,12,6,"ng-scrollbar",0),v.ec(1,"async")),2&e&&v.ic("ngIf",v.fc(1,1,t.state))},directives:[_.k,R.a,k.c,k.f,x.b,y.c,C.c,y.n,y.f,C.a,_.j,P.n,M.a,I.a,Ne],pipes:[_.b],styles:["[_nghost-%COMP%]{display:block}.search[_ngcontent-%COMP%]{width:100%}.people[_ngcontent-%COMP%]{display:grid;grid-gap:16px;padding:16px}.scrollbar[_ngcontent-%COMP%]{max-height:calc(100vh - 64px);min-height:calc(100vh - 64px)}"]}),$e)}],De=((Ee=function e(){c(this,e)}).\u0275mod=v.Kb({type:Ee}),Ee.\u0275inj=v.Jb({factory:function(e){return new(e||Ee)},imports:[[l.h.forChild(Ze)],l.h]}),Ee),Ke=i("PCNd"),Qe=((Ae=function e(){c(this,e)}).\u0275mod=v.Kb({type:Ae}),Ae.\u0275inj=v.Jb({factory:function(e){return new(e||Ae)},imports:[[De,Ke.a]]}),Ae)}}])}();